# ğŸ” Boss ç›´è˜åçˆ¬è™«æ£€æµ‹åˆ†ææŠ¥å‘Š

## ğŸ“‹ åˆ†æçš„æ–‡ä»¶

1. âœ… `browser-check_beautified.js` - IE æµè§ˆå™¨æ£€æµ‹
2. âœ… `index_beautified.js` - Polyfill åº“
3. âœ… `main_beautified.min.js` - ä¸»è¦ä¸šåŠ¡é€»è¾‘

---

## ğŸ¯ åˆ†æç»“æœ

### 1. browser-check_beautified.js

**åŠŸèƒ½**ï¼šæ£€æµ‹ IE æµè§ˆå™¨

```javascript
// æ£€æµ‹ userAgent ä¸­æ˜¯å¦åŒ…å« "msie" æˆ– "trident"
if (-1 === navigator.userAgent.toLowerCase().indexOf("msie") && 
    -1 === navigator.userAgent.toLowerCase().indexOf("trident")) {
    return; // ä¸æ˜¯ IEï¼Œç›´æ¥è¿”å›
}

// å¦‚æœæ˜¯ IEï¼Œè·³è½¬åˆ°ä¸æ”¯æŒé¡µé¢
window.location.href = "/web/common/nonsupport.html?from=geek-pc";
```

**ç»“è®º**ï¼šâŒ ä¸ Playwright æ£€æµ‹æ— å…³

---

### 2. index_beautified.js

**åŠŸèƒ½**ï¼šPolyfill åº“ï¼ˆå…¼å®¹æ€§è¡¥ä¸ï¼‰

**åŒ…å«å†…å®¹**ï¼š
- é€šç”¨çš„ JavaScript å·¥å…·å‡½æ•°
- å¯¹è±¡æ“ä½œã€ç»§æ‰¿ã€ç±»å‹æ£€æŸ¥
- Symbolã€Promise ç­‰ ES6+ ç‰¹æ€§çš„ polyfill

**ç»“è®º**ï¼šâŒ ä¸ Playwright æ£€æµ‹æ— å…³

---

### 3. main_beautified.min.js

**åŠŸèƒ½**ï¼šä¸»è¦ä¸šåŠ¡é€»è¾‘

**åŒ…å«å†…å®¹**ï¼š
- ç™»å½•ã€æ³¨å†Œç›¸å…³çš„ä¸šåŠ¡é€»è¾‘
- è¡¨å•éªŒè¯ã€é”™è¯¯å¤„ç†
- æ‰«ç ç™»å½•ã€çŸ­ä¿¡éªŒè¯ç 
- ç”¨æˆ·èº«ä»½åˆ‡æ¢ï¼ˆBOSSã€çŒå¤´ã€ç‰›äººï¼‰

**æœç´¢ç»“æœ**ï¼š
- âŒ æ²¡æœ‰æ‰¾åˆ° `navigator.webdriver`
- âŒ æ²¡æœ‰æ‰¾åˆ° `window.chrome` æ£€æµ‹
- âŒ æ²¡æœ‰æ‰¾åˆ° `navigator.plugins` æ£€æµ‹
- âŒ æ²¡æœ‰æ‰¾åˆ° `about:blank` è·³è½¬ä»£ç 

**ç»“è®º**ï¼šâŒ è¿™ä¸ªæ–‡ä»¶ä¸­æ²¡æœ‰æ˜æ˜¾çš„ Playwright æ£€æµ‹ä»£ç 

---

## ğŸš¨ é‡è¦å‘ç°

### åçˆ¬è™«ä»£ç å¯èƒ½ä¸åœ¨è¿™äº›æ–‡ä»¶ä¸­ï¼

Boss ç›´è˜çš„åçˆ¬è™«æ£€æµ‹å¾ˆå¯èƒ½é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š

### æ–¹å¼ 1ï¼šåŠ¨æ€åŠ è½½çš„ JS æ–‡ä»¶ â­â­â­

```javascript
// é¡µé¢åŠ è½½åï¼ŒåŠ¨æ€åŠ è½½åçˆ¬è™«è„šæœ¬
var script = document.createElement('script');
script.src = 'https://www.zhipin.com/security/anti-bot.js?t=' + Date.now();
document.head.appendChild(script);
```

**ç‰¹ç‚¹**ï¼š
- æ–‡ä»¶åå¯èƒ½æ¯æ¬¡éƒ½ä¸åŒ
- å¯èƒ½å¸¦æœ‰æ—¶é—´æˆ³æˆ–éšæœºå‚æ•°
- ä¸ä¼šå‡ºç°åœ¨åˆå§‹çš„ HTML ä¸­

### æ–¹å¼ 2ï¼šå†…è” script æ ‡ç­¾ â­â­â­â­

```html
<!-- ç›´æ¥å†™åœ¨ HTML ä¸­ -->
<script>
(function() {
    if (navigator.webdriver) {
        location.href = 'about:blank';
    }
})();
</script>
```

**ç‰¹ç‚¹**ï¼š
- ç›´æ¥åµŒå…¥åœ¨ HTML ä¸­
- ä¸ä¼šè¢«ä¸‹è½½ä¸ºå•ç‹¬çš„ JS æ–‡ä»¶
- æ‰§è¡Œæ—¶æœºæœ€æ—©

### æ–¹å¼ 3ï¼šæœåŠ¡ç«¯æ£€æµ‹ â­â­

**æ£€æµ‹å†…å®¹**ï¼š
- HTTP è¯·æ±‚å¤´ï¼ˆUser-Agentã€Acceptã€Accept-Language ç­‰ï¼‰
- TLS æŒ‡çº¹ï¼ˆJA3 æŒ‡çº¹ï¼‰
- WebSocket æ¡æ‰‹
- è¯·æ±‚é¡ºåºå’Œæ—¶é—´é—´éš”

### æ–¹å¼ 4ï¼šç¬¬ä¸‰æ–¹å®‰å…¨ SDK â­â­â­â­â­

Boss ç›´è˜å¯èƒ½ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹çš„åçˆ¬è™«æœåŠ¡ï¼Œå¦‚ï¼š
- é˜¿é‡Œäº‘çˆ¬è™«é£é™©ç®¡ç†
- è…¾è®¯äº‘éªŒè¯ç 
- é¡¶è±¡ç§‘æŠ€
- æ•°ç¾ç§‘æŠ€

---

## ğŸ” å¦‚ä½•æ‰¾åˆ°çœŸæ­£çš„æ£€æµ‹ä»£ç 

### æ–¹æ³• 1ï¼šä½¿ç”¨é«˜çº§ç›‘æ§è„šæœ¬ï¼ˆæ¨èï¼‰â­â­â­â­â­

å¯ç”¨æˆ‘æä¾›çš„ `AdvancedAntiCrawlerAnalyzer`ï¼š

```java
// åœ¨ PlaywrightService.createNewContext() ä¸­å–æ¶ˆæ³¨é‡Š
AdvancedAntiCrawlerAnalyzer.attachAdvancedMonitor(context);
```

**æ•ˆæœ**ï¼š
```log
[HOOK] location.href = about:blank
  å‚æ•°: ["about:blank"]
  è°ƒç”¨æ ˆ:
    at checkBrowser (https://www.zhipin.com/xxx.js:1234:56)  â† è¿™å°±æ˜¯çœŸæ­£çš„æ£€æµ‹ä»£ç ï¼
    at init (https://www.zhipin.com/xxx.js:789:12)
```

### æ–¹æ³• 2ï¼šæŸ¥çœ‹é¡µé¢æºä»£ç 

1. æ‰“å¼€ Boss ç›´è˜ç½‘ç«™
2. å³é”® â†’ æŸ¥çœ‹ç½‘é¡µæºä»£ç ï¼ˆCtrl+Uï¼‰
3. æœç´¢å…³é”®è¯ï¼š
   - `navigator.webdriver`
   - `window.chrome`
   - `about:blank`
   - `location.href`

### æ–¹æ³• 3ï¼šä½¿ç”¨ Chrome DevTools çš„ Network é¢æ¿

1. æ‰“å¼€ Chrome DevToolsï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° **Network** æ ‡ç­¾
3. å‹¾é€‰ **Preserve log**
4. åˆ·æ–°é¡µé¢
5. æŸ¥çœ‹æ‰€æœ‰åŠ è½½çš„ JS æ–‡ä»¶
6. ç‰¹åˆ«æ³¨æ„ï¼š
   - æ–‡ä»¶ååŒ…å« `security`ã€`anti`ã€`bot`ã€`check` çš„
   - åŠ è½½æ—¶é—´å¾ˆæ—©çš„
   - æ¥è‡ª CDN çš„

### æ–¹æ³• 4ï¼šä½¿ç”¨ Chrome DevTools çš„ Sources é¢æ¿

1. æ‰“å¼€ Chrome DevToolsï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° **Sources** æ ‡ç­¾
3. æŒ‰ `Ctrl+Shift+F` æ‰“å¼€å…¨å±€æœç´¢
4. æœç´¢å…³é”®è¯ï¼š
   - `navigator.webdriver`
   - `about:blank`
   - `location.href`

### æ–¹æ³• 5ï¼šä½¿ç”¨ Fiddler/Charles æŠ“åŒ…

1. å¯åŠ¨ Fiddler æˆ– Charles
2. é…ç½® HTTPS è§£å¯†
3. è®¿é—® Boss ç›´è˜
4. æŸ¥çœ‹æ‰€æœ‰è¯·æ±‚
5. æ‰¾åˆ°å¯ç–‘çš„ JS æ–‡ä»¶
6. ä¿å­˜å¹¶åˆ†æ

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³è¡ŒåŠ¨ï¼ˆæ¨èï¼‰

1. **å¯ç”¨é«˜çº§ç›‘æ§è„šæœ¬**
   ```java
   // åœ¨ PlaywrightService.java ä¸­å–æ¶ˆæ³¨é‡Š
   AdvancedAntiCrawlerAnalyzer.attachAdvancedMonitor(context);
   ```

2. **é‡å¯åº”ç”¨**

3. **æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰**

4. **æŸ¥çœ‹ [HOOK] æ—¥å¿—**
   - æ‰¾åˆ°è§¦å‘ `about:blank` çš„è°ƒç”¨æ ˆ
   - è®°å½•æ–‡ä»¶åå’Œè¡Œå·

5. **å®šä½åˆ°å…·ä½“ä»£ç **
   - åœ¨ Chrome DevTools ä¸­æ‰“å¼€å¯¹åº”çš„æ–‡ä»¶
   - è·³è½¬åˆ°å¯¹åº”çš„è¡Œå·
   - æŸ¥çœ‹æ£€æµ‹é€»è¾‘

6. **åˆ†ææ£€æµ‹é€»è¾‘**
   - çœ‹å®ƒæ£€æµ‹äº†å“ªäº›ç‰¹å¾
   - ç¡®è®¤æˆ‘ä»¬çš„ Stealth è„šæœ¬æ˜¯å¦å·²ç»éšè—äº†è¿™äº›ç‰¹å¾

### å¦‚æœé«˜çº§ç›‘æ§è„šæœ¬ä¹Ÿæ²¡æœ‰æ•è·åˆ°

é‚£è¯´æ˜æ£€æµ‹å¯èƒ½å‘ç”Ÿåœ¨ï¼š

1. **é¡µé¢åŠ è½½ä¹‹å‰** - åœ¨ `addInitScript` æ‰§è¡Œä¹‹å‰
   - è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨æ›´æ—©çš„æ³¨å…¥æ—¶æœº

2. **æœåŠ¡ç«¯** - åœ¨æœåŠ¡å™¨ç«¯å°±æ‹’ç»äº†è¯·æ±‚
   - è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥ HTTP è¯·æ±‚å¤´ã€TLS æŒ‡çº¹

3. **WebSocket** - é€šè¿‡ WebSocket é€šä¿¡æ£€æµ‹
   - è§£å†³æ–¹æ¡ˆï¼šHook WebSocket API

---

## ğŸ’¡ æ ¸å¿ƒå»ºè®®

### ä½ è¯´å¾—å¯¹ï¼

> **"ä½ ä¸ä»åº•å±‚è§£å†³æ°¸è¿œä¸çŸ¥é“å¯¹æ–¹æ˜¯å¦‚ä½•åˆ¤å®šæˆ‘ä»¬æ˜¯ Playwright"**

è¿™ä¸‰ä¸ª JS æ–‡ä»¶**ä¸æ˜¯**åçˆ¬è™«çš„æ ¸å¿ƒä»£ç ã€‚çœŸæ­£çš„æ£€æµ‹ä»£ç å¯èƒ½æ˜¯ï¼š

1. âœ… **åŠ¨æ€åŠ è½½çš„** - åœ¨é¡µé¢åŠ è½½åæ‰åŠ è½½
2. âœ… **å†…è”çš„** - ç›´æ¥å†™åœ¨ HTML ä¸­
3. âœ… **æ··æ·†çš„** - ä½¿ç”¨äº†æ›´é«˜çº§çš„æ··æ·†æŠ€æœ¯
4. âœ… **ç¬¬ä¸‰æ–¹çš„** - ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹å®‰å…¨ SDK

### æœ€æœ‰æ•ˆçš„æ–¹æ³•

**ä½¿ç”¨é«˜çº§ç›‘æ§è„šæœ¬ + Chrome DevTools åŠ¨æ€è°ƒè¯•**

è¿™æ ·å¯ä»¥ï¼š
- âœ… å®æ—¶æ•è·æ‰€æœ‰ API è°ƒç”¨
- âœ… è®°å½•å®Œæ•´çš„è°ƒç”¨æ ˆ
- âœ… æ‰¾åˆ°è§¦å‘è·³è½¬çš„å…·ä½“ä»£ç 
- âœ… åˆ†æè¿è¡Œæ—¶çš„å˜é‡å€¼

---

## ğŸ¯ æ€»ç»“

### å½“å‰çŠ¶æ€

- âŒ è¿™ä¸‰ä¸ª JS æ–‡ä»¶ä¸­æ²¡æœ‰æ‰¾åˆ° Playwright æ£€æµ‹ä»£ç 
- â“ çœŸæ­£çš„æ£€æµ‹ä»£ç å¯èƒ½åœ¨å…¶ä»–åœ°æ–¹

### ä¸‹ä¸€æ­¥

1. **å¯ç”¨é«˜çº§ç›‘æ§è„šæœ¬** - æ‰¾åˆ°çœŸæ­£è§¦å‘è·³è½¬çš„ä»£ç 
2. **ä½¿ç”¨ Chrome DevTools** - åŠ¨æ€è°ƒè¯•å’Œåˆ†æ
3. **æŸ¥çœ‹é¡µé¢æºä»£ç ** - å¯»æ‰¾å†…è”çš„æ£€æµ‹è„šæœ¬
4. **æŠ“åŒ…åˆ†æ** - æŸ¥çœ‹æ‰€æœ‰åŠ è½½çš„ JS æ–‡ä»¶

### æ ¸å¿ƒæ€è·¯

> **ä¸è¦é™æ€åˆ†ææ··æ·†çš„ä»£ç ï¼Œè€Œæ˜¯è¦åŠ¨æ€æ•è·è¿è¡Œæ—¶çš„è¡Œä¸ºï¼**

---

**å»ºè®®ç«‹å³å¯ç”¨é«˜çº§ç›‘æ§è„šæœ¬ï¼Œæ‰¾åˆ°çœŸæ­£çš„æ£€æµ‹ä»£ç ï¼** ğŸš€

