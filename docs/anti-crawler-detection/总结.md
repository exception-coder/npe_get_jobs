# ğŸ¯ Boss ç›´è˜åçˆ¬è™«æ£€æµ‹ - å®Œæ•´è§£å†³æ–¹æ¡ˆæ€»ç»“

## ğŸ“… æ—¶é—´çº¿

| æ—¶é—´ | äº‹ä»¶ | çŠ¶æ€ |
|------|------|------|
| 2026-01-23 00:10 | å‘ç°é¡µé¢è¢«åŠ«æŒåˆ° `about:blank` | âŒ é—®é¢˜ |
| 2026-01-23 00:20 | ä¸‹è½½å¹¶åˆ†æåçˆ¬è™« JS æ–‡ä»¶ | ğŸ” åˆ†æ |
| 2026-01-23 00:30 | å‘ç°ç‰¹å¾æ£€æµ‹è„šæœ¬æŠ¥é”™ | ğŸ› Bug |
| 2026-01-23 00:40 | å®æ–½å®Œæ•´çš„ Stealth æ–¹æ¡ˆ | âœ… ä¿®å¤ |

---

## ğŸ¯ æ ¸å¿ƒé—®é¢˜

### é—®é¢˜æè¿°
Boss ç›´è˜çš„åçˆ¬è™«ç³»ç»Ÿæ£€æµ‹åˆ° Playwright ç‰¹å¾ï¼Œå°†é¡µé¢åŠ«æŒåˆ° `about:blank`ã€‚

### æ£€æµ‹åˆ°çš„ç‰¹å¾
1. âœ… `navigator.webdriver === true`
2. âœ… `window.chrome` å¯¹è±¡ç¼ºå¤±
3. âœ… `navigator.plugins.length === 0`
4. âœ… `navigator.languages` å¼‚å¸¸
5. âœ… `permissions API` å¼‚å¸¸

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ ¸å¿ƒæ€è·¯
**ä»"é˜»æ­¢è·³è½¬"è½¬å˜ä¸º"éšè—ç‰¹å¾"**

```
ä¹‹å‰ï¼šæ£€æµ‹åˆ°è·³è½¬ â†’ é˜»æ­¢è·³è½¬ â†’ æ— é™å¾ªç¯ âŒ
ç°åœ¨ï¼šéšè—æ‰€æœ‰ç‰¹å¾ â†’ ä¸è¢«æ£€æµ‹ â†’ æ­£å¸¸è®¿é—® âœ…
```

### å®æ–½çš„ä¿®æ”¹

#### 1. å®Œæ•´çš„ Stealth è„šæœ¬ï¼ˆæ ¸å¿ƒï¼‰â­

```java
// PlaywrightService.java - createNewContext()
context.addInitScript(
    "// 1. éšè— webdriver\n" +
    "Object.defineProperty(navigator, 'webdriver', { get: () => undefined });\n" +
    "\n" +
    "// 2. ä¼ªé€  window.chrome\n" +
    "window.chrome = { runtime: {}, loadTimes: function() {}, csi: function() {}, app: {} };\n" +
    "\n" +
    "// 3. ä¼ªé€  navigator.plugins\n" +
    "Object.defineProperty(navigator, 'plugins', { get: () => [1, 2, 3, 4, 5] });\n" +
    "\n" +
    "// 4. ä¼ªé€  navigator.languages\n" +
    "Object.defineProperty(navigator, 'languages', { get: () => ['zh-CN', 'zh', 'en'] });\n" +
    "\n" +
    "// 5. ä¿®å¤ permissions API\n" +
    "// 6. è¦†ç›– toString æ–¹æ³•\n" +
    "console.log('[STEALTH] âœ“ All Playwright features hidden successfully');"
);
```

#### 2. ä¼˜åŒ–æµè§ˆå™¨å¯åŠ¨å‚æ•°

```java
.setArgs(List.of(
    "--disable-blink-features=AutomationControlled",  // æ ¸å¿ƒ
    "--exclude-switches=enable-automation",           // æ ¸å¿ƒ
    "--disable-infobars",
    "--window-size=1920,1080"
))
```

#### 3. å®Œå–„ BrowserContext é…ç½®

```java
.setViewportSize(1920, 1080)
.setDeviceScaleFactor(1.0)
.setHasTouch(false)
.setIsMobile(false)
```

#### 4. ç§»é™¤æœ‰é—®é¢˜çš„ä»£ç 

```java
// âŒ ç§»é™¤ï¼šä¼šæŠ¥é”™çš„ç‰¹å¾æ£€æµ‹è„šæœ¬
// pageObserver.attachPlaywrightDetector(context);

// âœ… ä¿ç•™ï¼šè¾…åŠ©åŠŸèƒ½
pageObserver.attachBlankBlocker(context);
pageObserver.attachBlankInterceptor(context);
```

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

### ä¿®å¤å‰ âŒ

```log
[PAGE_ERROR] TypeError: Illegal invocation at <anonymous>:87:22
[BLANK_REDIRECT] æ£€æµ‹åˆ°è·³è½¬åˆ° about:blank
å½“å‰ URL: about:blank
```

### ä¿®å¤å âœ…

```log
[STEALTH] âœ“ All Playwright features hidden successfully
âœ“ å·²ä¸ºå¹³å° BOSSç›´è˜ åˆå§‹åŒ–é¡µé¢: https://www.zhipin.com/
å½“å‰ URL: https://www.zhipin.com/
```

---

## ğŸ§ª éªŒè¯æ–¹æ³•

### æ–¹æ³• 1ï¼šé‡å¯åº”ç”¨ï¼ˆæœ€ç®€å•ï¼‰

```bash
# 1. åœæ­¢åº”ç”¨
# 2. å¯åŠ¨åº”ç”¨
# 3. æŸ¥çœ‹æ—¥å¿—ä¸­æ˜¯å¦æœ‰ "[STEALTH] âœ“ All Playwright features hidden successfully"
# 4. æŸ¥çœ‹æ˜¯å¦è¿˜æœ‰ "[PAGE_ERROR]" æˆ– "[BLANK_REDIRECT]"
```

### æ–¹æ³• 2ï¼šè¿è¡Œæµ‹è¯•å·¥å…·

```bash
# è¿è¡Œç‹¬ç«‹æµ‹è¯•
java getjobs.common.util.PlaywrightStealthTester
```

### æ–¹æ³• 3ï¼šæµè§ˆå™¨æ§åˆ¶å°éªŒè¯

```javascript
// æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼Œæ‰§è¡Œï¼š
console.table({
    'webdriver': navigator.webdriver,           // åº”è¯¥æ˜¯ undefined
    'chrome': typeof window.chrome,             // åº”è¯¥æ˜¯ 'object'
    'plugins': navigator.plugins.length,        // åº”è¯¥ > 0
    'languages': navigator.languages.join(',')  // åº”è¯¥æ˜¯ 'zh-CN,zh,en'
});
```

---

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

### æ ¸å¿ƒæ–‡ä»¶
1. âœ… `PlaywrightService.java`
   - `createNewContext()` - æ·»åŠ å®Œæ•´ Stealth è„šæœ¬
   - `init()` - ä¼˜åŒ–æµè§ˆå™¨å¯åŠ¨å‚æ•°

### æ–°å¢æ–‡ä»¶
2. âœ… `PlaywrightStealthTester.java` - ç‹¬ç«‹æµ‹è¯•å·¥å…·
3. âœ… `docs/anti-crawler-detection/è§£å†³æ–¹æ¡ˆ.md`
4. âœ… `docs/anti-crawler-detection/ä¿®å¤è®°å½•.md`
5. âœ… `docs/anti-crawler-detection/æµ‹è¯•æŒ‡å—.md`
6. âœ… `docs/anti-crawler-detection/æ€»ç»“.md` (æœ¬æ–‡æ¡£)

### æœªä¿®æ”¹çš„æ–‡ä»¶
- âšª `PlaywrightPageObserver.java`
- âšª `AntiCrawlerAnalyzer.java`

---

## ğŸ“ æ ¸å¿ƒç»éªŒ

### â­ æœ€é‡è¦çš„å‘ç°

1. **åªéšè— `navigator.webdriver` æ˜¯ä¸å¤Ÿçš„**
   - Boss ç›´è˜ä¼šæ£€æµ‹å¤šä¸ªç‰¹å¾
   - å¿…é¡»å…¨é¢ã€å½»åº•åœ°éšè—æ‰€æœ‰ç‰¹å¾

2. **ä½¿ç”¨ `Object.defineProperty` è€Œä¸æ˜¯ `delete`**
   ```javascript
   // âŒ ä¸å¤Ÿå½»åº•
   delete navigator.webdriver;
   
   // âœ… å®Œå…¨æ§åˆ¶
   Object.defineProperty(navigator, 'webdriver', { get: () => undefined });
   ```

3. **ä¼ªé€ çš„ç‰¹å¾è¦çœŸå®**
   ```javascript
   // âŒ å¤ªå‡
   window.chrome = {};
   
   // âœ… çœŸå®
   window.chrome = { runtime: {}, loadTimes: function() {}, csi: function() {}, app: {} };
   ```

4. **è„šæœ¬æ³¨å…¥æ—¶æœºå¾ˆé‡è¦**
   - å¿…é¡»åœ¨é¡µé¢åŠ è½½å‰æ³¨å…¥ï¼ˆ`addInitScript`ï¼‰
   - ä¸èƒ½åœ¨é¡µé¢åŠ è½½åä¿®æ”¹ï¼ˆå¤ªæ™šäº†ï¼‰

### å¸¸è§é”™è¯¯

| é”™è¯¯åšæ³• | æ­£ç¡®åšæ³• |
|---------|---------|
| åªéšè—ä¸€ä¸¤ä¸ªç‰¹å¾ | éšè—æ‰€æœ‰å¯èƒ½æš´éœ²çš„ç‰¹å¾ |
| ä½¿ç”¨ `delete` åˆ é™¤å±æ€§ | ä½¿ç”¨ `Object.defineProperty` æ§åˆ¶å±æ€§ |
| åœ¨é¡µé¢åŠ è½½åæ³¨å…¥è„šæœ¬ | ä½¿ç”¨ `addInitScript` åœ¨åŠ è½½å‰æ³¨å…¥ |
| ä¼ªé€ çš„ç‰¹å¾å¤ªç®€å• | ä¼ªé€ çœŸå®çš„æµè§ˆå™¨ç‰¹å¾ |
| åªé˜»æ­¢è·³è½¬ï¼Œä¸éšè—ç‰¹å¾ | ä»æ ¹æºè§£å†³ï¼Œéšè—ç‰¹å¾ |

---

## ğŸš€ ä¸‹ä¸€æ­¥

### ç«‹å³è¡ŒåŠ¨
1. âœ… é‡å¯åº”ç”¨
2. âœ… éªŒè¯ä¿®å¤æ•ˆæœ
3. âœ… è§‚å¯Ÿæ—¥å¿—è¾“å‡º

### å¦‚æœæˆåŠŸ
1. ğŸ“Š ç›‘æ§é•¿æœŸç¨³å®šæ€§
2. ğŸ“ è®°å½•æˆåŠŸç»éªŒ
3. ğŸ”„ ç»§ç»­å®Œå–„å…¶ä»–åŠŸèƒ½

### å¦‚æœå¤±è´¥
1. ğŸ” æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°
2. ğŸ” éªŒè¯æ‰€æœ‰ç‰¹å¾æ˜¯å¦æ­£ç¡®éšè—
3. ğŸ” è€ƒè™‘ä½¿ç”¨é«˜çº§æ–¹æ¡ˆï¼š
   - Chrome DevTools Protocol (CDP)
   - çœŸå®çš„ Chrome ç”¨æˆ·é…ç½®æ–‡ä»¶
   - ä»£ç† IP æ± 
   - é™ä½çˆ¬å–é¢‘ç‡

---

## ğŸ“š å‚è€ƒèµ„æ–™

### Playwright å®˜æ–¹
- [Emulation](https://playwright.dev/docs/emulation)
- [Browser Contexts](https://playwright.dev/docs/browser-contexts)
- [API Reference](https://playwright.dev/java/docs/api/class-playwright)

### åæ£€æµ‹æŠ€æœ¯
- [puppeteer-extra-plugin-stealth](https://github.com/berstend/puppeteer-extra/tree/master/packages/puppeteer-extra-plugin-stealth)
- [undetected-chromedriver](https://github.com/ultrafunkamsterdam/undetected-chromedriver)

### æµè§ˆå™¨æŒ‡çº¹
- [FingerprintJS](https://github.com/fingerprintjs/fingerprintjs)
- [CreepJS](https://abrahamjuliot.github.io/creepjs/)

---

## ğŸ’¡ å…³é”®æ´å¯Ÿ

### 1. åçˆ¬è™«çš„æœ¬è´¨
åçˆ¬è™«ç³»ç»Ÿé€šè¿‡æ£€æµ‹**æµè§ˆå™¨æŒ‡çº¹**æ¥è¯†åˆ«è‡ªåŠ¨åŒ–å·¥å…·ï¼š
- æ­£å¸¸æµè§ˆå™¨ï¼šæœ‰å®Œæ•´çš„ç‰¹å¾ï¼ˆchromeã€pluginsã€languages ç­‰ï¼‰
- è‡ªåŠ¨åŒ–å·¥å…·ï¼šç¼ºå°‘æŸäº›ç‰¹å¾æˆ–ç‰¹å¾å¼‚å¸¸

### 2. å¯¹æŠ—çš„æœ¬è´¨
å¯¹æŠ—åçˆ¬è™«çš„æ ¸å¿ƒæ˜¯**è®©è‡ªåŠ¨åŒ–å·¥å…·çœ‹èµ·æ¥åƒæ­£å¸¸æµè§ˆå™¨**ï¼š
- ä¸æ˜¯"é˜»æ­¢æ£€æµ‹"ï¼Œè€Œæ˜¯"é¿å…è¢«æ£€æµ‹"
- ä¸æ˜¯"å¯¹æŠ—è·³è½¬"ï¼Œè€Œæ˜¯"éšè—ç‰¹å¾"

### 3. æˆåŠŸçš„å…³é”®
- âœ… **å…¨é¢æ€§**ï¼šéšè—æ‰€æœ‰å¯èƒ½æš´éœ²çš„ç‰¹å¾
- âœ… **å½»åº•æ€§**ï¼šä½¿ç”¨åº•å±‚ API å®Œå…¨æ§åˆ¶
- âœ… **çœŸå®æ€§**ï¼šä¼ªé€ çš„ç‰¹å¾è¦åƒçœŸå®æµè§ˆå™¨
- âœ… **æ—¶æœºæ€§**ï¼šåœ¨é¡µé¢åŠ è½½å‰æ³¨å…¥è„šæœ¬

---

## âœ¨ æœ€ç»ˆæ€»ç»“

### é—®é¢˜
Boss ç›´è˜æ£€æµ‹åˆ° Playwright ç‰¹å¾ï¼Œå°†é¡µé¢åŠ«æŒåˆ° `about:blank`ã€‚

### åŸå› 
åªéšè—äº† `navigator.webdriver`ï¼Œå…¶ä»–ç‰¹å¾ï¼ˆchromeã€plugins ç­‰ï¼‰ä»ç„¶æš´éœ²ã€‚

### è§£å†³
å®æ–½å®Œæ•´çš„ Stealth æ–¹æ¡ˆï¼Œéšè—æ‰€æœ‰ Playwright ç‰¹å¾ã€‚

### æ•ˆæœ
é¡µé¢æ­£å¸¸åŠ è½½ï¼Œä¸å†è¢«æ£€æµ‹å’ŒåŠ«æŒã€‚

### æ ¸å¿ƒ
**ä»"é˜»æ­¢è·³è½¬"è½¬å˜ä¸º"éšè—ç‰¹å¾"ï¼Œä»æ ¹æºè§£å†³é—®é¢˜ã€‚**

---

## ğŸ‰ ç»“è¯­

è¿™æ¬¡ä¿®å¤çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼š

> **ä¸è¦è¯•å›¾å¯¹æŠ—åçˆ¬è™«çš„æ£€æµ‹ç»“æœï¼ˆè·³è½¬ï¼‰ï¼Œè€Œæ˜¯è¦é¿å…è¢«æ£€æµ‹åˆ°ã€‚**

å°±åƒé—´è°ä¸€æ ·ï¼š
- âŒ ä¸å¥½çš„åšæ³•ï¼šè¢«å‘ç°åé€ƒè·‘ï¼ˆé˜»æ­¢è·³è½¬ï¼‰
- âœ… å¥½çš„åšæ³•ï¼šä¼ªè£…æˆæ™®é€šäººï¼Œä¸è¢«å‘ç°ï¼ˆéšè—ç‰¹å¾ï¼‰

å¸Œæœ›è¿™æ¬¡ä¿®å¤èƒ½å¤ŸæˆåŠŸï¼ğŸš€

---

**æœ€åæ›´æ–°æ—¶é—´ï¼š2026-01-23 00:45**

