# WebClient 基础设施配置示例
# 将此配置添加到 application.yml 或 application-{profile}.yml 中

# 代理配置（可选）
# 如果不需要代理，可以不配置或留空
proxy:
  host: 127.0.0.1  # 代理主机地址
  port: 7890        # 代理端口

# WebClient 基础配置
webclient:
  # 响应超时时间（毫秒）
  # 从发送请求到接收到完整响应的最大等待时间
  # 默认值: 30000 (30秒)
  response-timeout: 30000

  # 连接超时时间（毫秒）
  # 建立TCP连接的最大等待时间
  # 默认值: 2000 (2秒)
  connect-timeout: 2000

  # 读取超时时间（秒）
  # 从连接建立后，等待服务器发送数据的最大时间
  # 默认值: 30
  read-timeout: 30

  # 写入超时时间（秒）
  # 向服务器发送数据的最大时间
  # 默认值: 30
  write-timeout: 30

  # 是否跟随HTTP重定向（3xx状态码）
  # true: 自动跟随重定向（最多5次）
  # false: 不跟随重定向，直接返回重定向响应
  # 默认值: true
  follow-redirect: true

  # 是否启用HTTP压缩（gzip/deflate）
  # true: 启用压缩，减少网络传输
  # false: 不启用压缩
  # 默认值: true
  compress: true

# 配置说明：
# 1. 所有配置项都有默认值，可以根据实际需求调整
# 2. 代理配置是可选的，如果不配置或配置为空，将不使用代理
# 3. 超时时间建议根据实际网络环境和API响应时间调整
# 4. 如果遇到重定向循环，可以设置 follow-redirect: false
# 5. 压缩可以提升传输效率，但会增加CPU使用

# ============================================================================
# 完整的 application.yml 配置示例（可直接复制使用）
# ============================================================================

# 方式一：使用代理的完整配置


# ============================================================================
# 方式二：不使用代理的完整配置
# ============================================================================
# proxy:
#   host: ""
#   port: 0
#
# webclient:
#   response-timeout: 30000
#   connect-timeout: 2000
#   read-timeout: 30
#   write-timeout: 30
#   follow-redirect: true
#   compress: true

# ============================================================================
# 方式三：生产环境推荐配置
# ============================================================================
# proxy:
#   host: ${PROXY_HOST:}      # 从环境变量读取，如果不存在则为空
#   port: ${PROXY_PORT:0}      # 从环境变量读取，如果不存在则为0
#
# webclient:
#   response-timeout: 60000   # 生产环境建议更长的超时时间
#   connect-timeout: 5000
#   read-timeout: 60
#   write-timeout: 60
#   follow-redirect: true
#   compress: true

# ============================================================================
# 方式四：开发环境推荐配置
# ============================================================================
# proxy:
#   host: 127.0.0.1
#   port: 7890
#
# webclient:
#   response-timeout: 30000
#   connect-timeout: 2000
#   read-timeout: 30
#   write-timeout: 30
#   follow-redirect: true
#   compress: true
