# Access æ—¥å¿—ä½¿ç”¨ç¤ºä¾‹

## ğŸ“‹ ç›®å½•

- [åŸºæœ¬é…ç½®](#åŸºæœ¬é…ç½®)
- [æ—¥å¿—è¾“å‡ºç¤ºä¾‹](#æ—¥å¿—è¾“å‡ºç¤ºä¾‹)
- [å¸¸è§åœºæ™¯](#å¸¸è§åœºæ™¯)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)

## åŸºæœ¬é…ç½®

### 1. å¯ç”¨ Access æ—¥å¿—ï¼ˆé»˜è®¤å·²å¯ç”¨ï¼‰

```yaml
access:
  log:
    enabled: true
```

### 2. è‡ªå®šä¹‰æ‹¦æˆªè·¯å¾„

```yaml
access:
  log:
    enabled: true
    include-patterns:
      - /api/**
    exclude-patterns:
      - /api/auth/**
      - /actuator/**
      - /error
      - /favicon.ico
```

## æ—¥å¿—è¾“å‡ºç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šå•ä¸ªè¯·æ±‚

å‡è®¾åœ¨ `1704067200` è¿™ä¸€ç§’å†…ï¼ŒIP `192.168.1.1` åªå‘é€äº†ä¸€ä¸ªè¯·æ±‚ï¼š

```
ACCESS_LOG - IP: 192.168.1.1 | Timestamp: 1704067200 | Count: 1 | Requests: {GET:/api/users}
```

### ç¤ºä¾‹ 2ï¼šå¤šä¸ªç›¸åŒè¯·æ±‚

å‡è®¾åœ¨ `1704067200` è¿™ä¸€ç§’å†…ï¼ŒIP `192.168.1.1` å‘é€äº† 5 ä¸ªç›¸åŒçš„è¯·æ±‚ï¼š

```
ACCESS_LOG - IP: 192.168.1.1 | Timestamp: 1704067200 | Count: 5 | Requests: {GET:/api/users}
```

**è¯´æ˜**ï¼šè™½ç„¶å‘é€äº† 5 æ¬¡è¯·æ±‚ï¼Œä½† `Requests` å­—æ®µåªæ˜¾ç¤ºä¸€ä¸ªï¼Œå› ä¸ºè¯·æ±‚æ–¹æ³•+è·¯å¾„ç›¸åŒã€‚

### ç¤ºä¾‹ 3ï¼šå¤šä¸ªä¸åŒè¯·æ±‚

å‡è®¾åœ¨ `1704067200` è¿™ä¸€ç§’å†…ï¼ŒIP `192.168.1.1` å‘é€äº†ä»¥ä¸‹è¯·æ±‚ï¼š
- `GET /api/users`ï¼ˆ2 æ¬¡ï¼‰
- `POST /api/auth/login`ï¼ˆ1 æ¬¡ï¼‰
- `GET /api/products`ï¼ˆ2 æ¬¡ï¼‰

è¾“å‡ºï¼š

```
ACCESS_LOG - IP: 192.168.1.1 | Timestamp: 1704067200 | Count: 5 | Requests: {GET:/api/users, POST:/api/auth/login, GET:/api/products}
```

**è¯´æ˜**ï¼š
- `Count: 5` è¡¨ç¤ºæ€»è¯·æ±‚æ¬¡æ•°
- `Requests` åŒ…å«æ‰€æœ‰ä¸åŒçš„è¯·æ±‚æ–¹æ³•+è·¯å¾„ç»„åˆ

### ç¤ºä¾‹ 4ï¼šå¤šä¸ª IP åŒæ—¶è¯·æ±‚

å‡è®¾åœ¨ `1704067200` è¿™ä¸€ç§’å†…ï¼š
- IP `192.168.1.1` å‘é€äº† 3 ä¸ªè¯·æ±‚ï¼š`GET /api/users`ï¼ˆ2 æ¬¡ï¼‰ã€`POST /api/auth/login`ï¼ˆ1 æ¬¡ï¼‰
- IP `192.168.1.2` å‘é€äº† 2 ä¸ªè¯·æ±‚ï¼š`GET /api/products`ï¼ˆ2 æ¬¡ï¼‰

è¾“å‡ºï¼š

```
ACCESS_LOG - IP: 192.168.1.1 | Timestamp: 1704067200 | Count: 3 | Requests: {GET:/api/users, POST:/api/auth/login}
ACCESS_LOG - IP: 192.168.1.2 | Timestamp: 1704067200 | Count: 2 | Requests: {GET:/api/products}
```

**è¯´æ˜**ï¼šæ¯ä¸ª IP ä¼šå•ç‹¬è¾“å‡ºä¸€æ¡è®°å½•ã€‚

## å¸¸è§åœºæ™¯

### åœºæ™¯ 1ï¼šAPI è®¿é—®ç»Ÿè®¡

**éœ€æ±‚**ï¼šè®°å½•æ‰€æœ‰ API è¯·æ±‚ï¼Œåˆ†ææ¥å£è°ƒç”¨é¢‘ç‡ã€‚

**é…ç½®**ï¼š

```yaml
access:
  log:
    enabled: true
    include-patterns:
      - /api/**
    exclude-patterns:
      - /api/auth/**
      - /actuator/**
```

**è¾“å‡ºç¤ºä¾‹**ï¼š

```
ACCESS_LOG - IP: 192.168.1.1 | Timestamp: 1704067200 | Count: 10 | Requests: {GET:/api/users, GET:/api/products, POST:/api/orders}
```

### åœºæ™¯ 2ï¼šç‰¹å®šè·¯å¾„ç›‘æ§

**éœ€æ±‚**ï¼šåªè®°å½•è®¢å•å’Œæ”¯ä»˜ç›¸å…³çš„è¯·æ±‚ã€‚

**é…ç½®**ï¼š

```yaml
access:
  log:
    enabled: true
    include-patterns:
      - /api/orders/**
      - /api/payments/**
    exclude-patterns:
      - /actuator/**
```

**è¾“å‡ºç¤ºä¾‹**ï¼š

```
ACCESS_LOG - IP: 192.168.1.1 | Timestamp: 1704067200 | Count: 5 | Requests: {GET:/api/orders, POST:/api/orders, POST:/api/payments}
```

### åœºæ™¯ 3ï¼šæ’é™¤å¥åº·æ£€æŸ¥

**éœ€æ±‚**ï¼šè®°å½•æ‰€æœ‰è¯·æ±‚ï¼Œä½†æ’é™¤å¥åº·æ£€æŸ¥å’Œç›‘æ§ç«¯ç‚¹ã€‚

**é…ç½®**ï¼š

```yaml
access:
  log:
    enabled: true
    include-patterns:
      - /**
    exclude-patterns:
      - /actuator/**
      - /health/**
      - /metrics/**
      - /error
      - /favicon.ico
```

### åœºæ™¯ 4ï¼šé«˜å¹¶å‘åœºæ™¯

**éœ€æ±‚**ï¼šåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼ŒåŒä¸€ç§’å†…åŒä¸€ IP å¯èƒ½å‘é€å¤§é‡è¯·æ±‚ã€‚

**é…ç½®**ï¼š

```yaml
access:
  log:
    enabled: true
    include-patterns:
      - /api/**
```

**è¾“å‡ºç¤ºä¾‹**ï¼š

```
ACCESS_LOG - IP: 192.168.1.1 | Timestamp: 1704067200 | Count: 100 | Requests: {GET:/api/users, GET:/api/products, POST:/api/orders, DELETE:/api/cart}
```

**è¯´æ˜**ï¼šå³ä½¿åŒä¸€ç§’å†…æœ‰ 100 ä¸ªè¯·æ±‚ï¼Œä¹Ÿåªè¾“å‡ºä¸€æ¡è®°å½•ï¼Œ`Requests` å­—æ®µåŒ…å«æ‰€æœ‰ä¸åŒçš„è¯·æ±‚æ–¹æ³•+è·¯å¾„ç»„åˆã€‚

## æ€§èƒ½ä¼˜åŒ–

### 1. å‡å°‘æ—¥å¿—è¾“å‡º

å¦‚æœè¯·æ±‚é‡å¾ˆå¤§ï¼Œå¯ä»¥è€ƒè™‘åªè®°å½•ç‰¹å®šè·¯å¾„ï¼š

```yaml
access:
  log:
    enabled: true
    include-patterns:
      - /api/important/**
    exclude-patterns:
      - /actuator/**
```

### 2. æ’é™¤é™æ€èµ„æº

æ’é™¤é™æ€èµ„æºè¯·æ±‚ï¼Œå‡å°‘æ—¥å¿—é‡ï¼š

```yaml
access:
  log:
    enabled: true
    include-patterns:
      - /api/**
    exclude-patterns:
      - /actuator/**
      - /static/**
      - /assets/**
      - /favicon.ico
```

### 3. è°ƒæ•´æ—¥å¿—çº§åˆ«

å¦‚æœä¸éœ€è¦è¯¦ç»†æ—¥å¿—ï¼Œå¯ä»¥è°ƒæ•´æ—¥å¿—çº§åˆ«ï¼š

```yaml
access:
  log:
    log-level: WARN  # åªè¾“å‡ºè­¦å‘Šå’Œé”™è¯¯
```

## ğŸ” æ—¥å¿—åˆ†æ

### åˆ†æè¯·æ±‚é¢‘ç‡

é€šè¿‡ `Count` å­—æ®µå¯ä»¥å¿«é€Ÿäº†è§£è¯·æ±‚é¢‘ç‡ï¼š

```
ACCESS_LOG - IP: 192.168.1.1 | Timestamp: 1704067200 | Count: 100 | Requests: {...}
```

è¡¨ç¤ºè¯¥ IP åœ¨è¿™ä¸€ç§’å†…å‘é€äº† 100 ä¸ªè¯·æ±‚ã€‚

### åˆ†æè¯·æ±‚åˆ†å¸ƒ

é€šè¿‡ `Requests` å­—æ®µå¯ä»¥äº†è§£è¯·æ±‚åˆ†å¸ƒï¼š

```
ACCESS_LOG - IP: 192.168.1.1 | Timestamp: 1704067200 | Count: 50 | Requests: {GET:/api/users, GET:/api/products, POST:/api/orders}
```

è¡¨ç¤ºè¯¥ IP åœ¨è¿™ä¸€ç§’å†…è®¿é—®äº† 3 ä¸ªä¸åŒçš„æ¥å£ã€‚

### è¯†åˆ«å¼‚å¸¸è¯·æ±‚

å¦‚æœæŸä¸ª IP çš„ `Count` å€¼å¼‚å¸¸é«˜ï¼Œå¯èƒ½æ˜¯å¼‚å¸¸è¯·æ±‚ï¼š

```
ACCESS_LOG - IP: 192.168.1.1 | Timestamp: 1704067200 | Count: 1000 | Requests: {GET:/api/users}
```

è¡¨ç¤ºè¯¥ IP åœ¨è¿™ä¸€ç§’å†…å‘åŒä¸€ä¸ªæ¥å£å‘é€äº† 1000 ä¸ªè¯·æ±‚ï¼Œå¯èƒ½æ˜¯æ”»å‡»æˆ–çˆ¬è™«ã€‚

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ—¶é—´æˆ³ç²¾åº¦**ï¼šæ—¶é—´æˆ³æ˜¯ç§’çº§çš„ï¼ŒåŒä¸€ç§’å†…çš„è¯·æ±‚ä¼šè¢«åˆå¹¶
2. **IP åœ°å€è·å–**ï¼šIP åœ°å€ä»è¯·æ±‚å¤´è·å–ï¼Œå¦‚æœä½¿ç”¨åå‘ä»£ç†ï¼Œéœ€è¦æ­£ç¡®é…ç½®è¯·æ±‚å¤´
3. **å†…å­˜ä½¿ç”¨**ï¼šå¤§é‡è¯·æ±‚æ—¶ï¼Œå†…å­˜ä½¿ç”¨ä¼šå¢åŠ ï¼Œä½†ä¼šè‡ªåŠ¨æ¸…ç†è¿‡æœŸè®°å½•
4. **æ—¥å¿—è¾“å‡ºé¢‘ç‡**ï¼šæ¯ç§’è¾“å‡ºä¸€æ¬¡ï¼Œè¾“å‡ºä¸Šä¸€ç§’çš„æ—¥å¿—è®°å½•

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [README.md](./README.md) - å®Œæ•´æ–‡æ¡£
- [package-info.java](./package-info.java) - åŒ…æ–‡æ¡£

