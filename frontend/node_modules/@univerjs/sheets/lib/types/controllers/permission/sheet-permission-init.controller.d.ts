import { IDeleteWorksheetProtectionParams } from '../../commands/mutations/delete-worksheet-protection.mutation';
import { Disposable, IAuthzIoService, ICommandService, IPermissionService, IUndoRedoService, IUniverInstanceService, UserManagerService } from '@univerjs/core';
import { RangeProtectionRuleModel } from '../../model/range-protection-rule.model';
import { WorkbookPermissionService } from '../../services/permission/workbook-permission/workbook-permission.service';
import { WorksheetProtectionPointModel, WorksheetProtectionRuleModel } from '../../services/permission/worksheet-permission';
interface ISheetPermissionCmdBufferListItemType {
    id: string;
    params: IDeleteWorksheetProtectionParams;
}
export declare class SheetPermissionInitController extends Disposable {
    private readonly _univerInstanceService;
    private _permissionService;
    private _authzIoService;
    private _rangeProtectionRuleModel;
    private _worksheetProtectionRuleModel;
    private _userManagerService;
    private _worksheetProtectionPointRuleModel;
    private _workbookPermissionService;
    private _undoRedoService;
    private _commandService;
    private _cmdBufferList;
    private _isRangePermissionInitFinish;
    private _isWorksheetPermissionInitFinish;
    private _isWorkbookPermissionInitFinish;
    constructor(_univerInstanceService: IUniverInstanceService, _permissionService: IPermissionService, _authzIoService: IAuthzIoService, _rangeProtectionRuleModel: RangeProtectionRuleModel, _worksheetProtectionRuleModel: WorksheetProtectionRuleModel, _userManagerService: UserManagerService, _worksheetProtectionPointRuleModel: WorksheetProtectionPointModel, _workbookPermissionService: WorkbookPermissionService, _undoRedoService: IUndoRedoService, _commandService: ICommandService);
    initPermission(): void;
    refreshRangeProtectPermission(): void;
    getIsPermissionInitFinish(): boolean;
    addCmdToBufferList(item: ISheetPermissionCmdBufferListItemType): void;
    private _processCmdBufferList;
    private _initRangePermissionFromSnapshot;
    private _initRangePermissionChange;
    initWorkbookPermissionChange(_unitId?: string): Promise<void>;
    private _initWorkbookPermissionFromSnapshot;
    private _initWorksheetPermissionChange;
    private _initWorksheetPermissionPointsChange;
    private _initWorksheetPermissionFromSnapshot;
    private _initUserChange;
    refreshPermission(unitId: string, permissionId: string): void;
    private _refreshPermissionByCollaCreate;
}
export {};
