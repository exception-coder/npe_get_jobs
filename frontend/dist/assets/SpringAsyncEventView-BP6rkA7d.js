import{V as r,b as a,a as o}from"./VCard-DFIDGoOa.js";import{V as z,a as U}from"./VRow-C6N6h8s9.js";import{V as w}from"./VAlert-CfJUBCCM.js";import{d as F,k as x,p as k,o as v,e as n,b as l,Q as t,g as s,aV as N,y as g,n as y,t as i,v as d,aU as V,V as m,F as A,q as C,a$ as I,c as T,x as S}from"./index-mJOBftNs.js";import{V as L,b as p,d as P,e as f}from"./VTabs-BYSgCciz.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"spring-async-event-view"},M={class:"use-case-box"},Q=F({__name:"SpringAsyncEventView",setup(W){const b=x("wrong"),c=x("event"),R=x([{icon:"mdi-alert-circle",text:"ğŸš¨ @Async é»˜è®¤ä¸æ˜¯çº¿ç¨‹æ± ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»è‡ªå®šä¹‰çº¿ç¨‹æ± "},{icon:"mdi-alert-circle",text:"âš ï¸ å¼‚æ­¥æ–¹æ³•çš„äº‹åŠ¡ä¸ä¼šç»§æ‰¿ï¼Œéœ€è¦å•ç‹¬å¤„ç†"},{icon:"mdi-alert-circle",text:"ğŸ“¢ äº‹ä»¶ç›‘å¬å™¨é»˜è®¤åŒæ­¥æ‰§è¡Œï¼Œéœ€è¦å¼‚æ­¥æ—¶åŠ  @Async"},{icon:"mdi-alert-circle",text:"ğŸ”„ äº‹ä»¶ç›‘å¬å™¨å¼‚å¸¸ä¸ä¼šå½±å“å‘å¸ƒè€…ï¼Œéœ€è¦è‡ªè¡Œå¤„ç†"}]),B=x([{icon:"mdi-check-circle",text:"ğŸ¯ @Async å¿…é¡»æ˜¾å¼æŒ‡å®šçº¿ç¨‹æ± åç§°ï¼Œé¿å…ä½¿ç”¨é»˜è®¤æ‰§è¡Œå™¨"},{icon:"mdi-check-circle",text:"ğŸ“Š ç›‘æ§çº¿ç¨‹æ± æŒ‡æ ‡ï¼ˆæ´»è·ƒçº¿ç¨‹ã€é˜Ÿåˆ—é•¿åº¦ç­‰ï¼‰"},{icon:"mdi-check-circle",text:"âœ… äº‹ä»¶ç›‘å¬å™¨ä½¿ç”¨ @Async å®ç°å¼‚æ­¥å¤„ç†"},{icon:"mdi-check-circle",text:"ğŸ”’ äº‹ä»¶ç›‘å¬å™¨è¦åšå¥½å¼‚å¸¸å¤„ç†ï¼Œé¿å…å½±å“å…¶ä»–ç›‘å¬å™¨"},{icon:"mdi-check-circle",text:"âš¡ åˆç†ä½¿ç”¨äº‹ä»¶é©±åŠ¨ï¼Œé¿å…è¿‡åº¦è§£è€¦å¯¼è‡´éš¾ä»¥è¿½è¸ª"}]);return(j,e)=>(v(),k("div",D,[n(I,{fluid:"",class:"pa-4"},{default:l(()=>[n(r,{class:"mb-4 title-card",elevation:"0"},{default:l(()=>[n(a,{class:"text-center pa-6"},{default:l(()=>[...e[4]||(e[4]=[t("div",{class:"text-h4 font-weight-bold mb-2"}," âš¡ Spring å¼‚æ­¥ä¸äº‹ä»¶é©±åŠ¨ ",-1),t("div",{class:"text-subtitle-1 text-medium-emphasis"}," è®©åº”ç”¨æ›´é«˜æ•ˆï¼Œä»£ç æ›´è§£è€¦ï¼ğŸ¯ ",-1)])]),_:1})]),_:1}),n(z,null,{default:l(()=>[n(U,{cols:"12",md:"4"},{default:l(()=>[n(r,{class:"mb-4 concept-card",elevation:"2"},{default:l(()=>[n(o,{class:"d-flex align-center"},{default:l(()=>[...e[5]||(e[5]=[t("span",{class:"text-h6"},"ğŸš€ @Async å¼‚æ­¥æ‰§è¡Œ",-1)])]),_:1}),n(a,null,{default:l(()=>[e[12]||(e[12]=t("p",{class:"text-body-2 mb-3"},[s(" è®©æ–¹æ³•åœ¨"),t("strong",null,"ç‹¬ç«‹çº¿ç¨‹"),s("ä¸­æ‰§è¡Œï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹ï¼ ")],-1)),n(w,{type:"warning",density:"compact",class:"mb-3"},{default:l(()=>[...e[6]||(e[6]=[t("strong",null,"âš ï¸ é‡è¦æé†’ï¼š",-1),t("br",null,null,-1),s(" é»˜è®¤ä½¿ç”¨ SimpleAsyncTaskExecutor",-1),t("br",null,null,-1),s(" æ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºæ–°çº¿ç¨‹ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼ ",-1)])]),_:1}),t("div",M,[e[11]||(e[11]=t("div",{class:"text-subtitle-2 mb-2"},"ğŸ’¡ é€‚ç”¨åœºæ™¯ï¼š",-1)),n(N,null,{default:l(()=>[n(g,{size:"small",color:"primary"},{default:l(()=>[...e[7]||(e[7]=[s("å‘é€é‚®ä»¶",-1)])]),_:1}),n(g,{size:"small",color:"success"},{default:l(()=>[...e[8]||(e[8]=[s("æ¶ˆæ¯æ¨é€",-1)])]),_:1}),n(g,{size:"small",color:"warning"},{default:l(()=>[...e[9]||(e[9]=[s("æ—¥å¿—è®°å½•",-1)])]),_:1}),n(g,{size:"small",color:"info"},{default:l(()=>[...e[10]||(e[10]=[s("æ•°æ®ç»Ÿè®¡",-1)])]),_:1})]),_:1})])]),_:1})]),_:1}),n(r,{class:"mb-4 concept-card",elevation:"2"},{default:l(()=>[n(o,{class:"d-flex align-center"},{default:l(()=>[...e[13]||(e[13]=[t("span",{class:"text-h6"},"ğŸ“¢ Spring Event äº‹ä»¶é©±åŠ¨",-1)])]),_:1}),n(a,null,{default:l(()=>[e[20]||(e[20]=t("p",{class:"text-body-2 mb-3"},[s(" å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼Œå®ç°"),t("strong",null,"ä¸šåŠ¡è§£è€¦"),s("ï¼ ")],-1)),n(y,{density:"compact"},{default:l(()=>[n(i,null,{prepend:l(()=>[n(m,{color:"primary"},{default:l(()=>[...e[14]||(e[14]=[s("mdi-bullhorn",-1)])]),_:1})]),default:l(()=>[n(d,null,{default:l(()=>[...e[15]||(e[15]=[t("strong",null,"å‘å¸ƒè€…",-1)])]),_:1}),n(V,null,{default:l(()=>[...e[16]||(e[16]=[s("å‘å¸ƒäº‹ä»¶ï¼Œä¸å…³å¿ƒè°ç›‘å¬",-1)])]),_:1})]),_:1}),n(i,null,{prepend:l(()=>[n(m,{color:"success"},{default:l(()=>[...e[17]||(e[17]=[s("mdi-ear-hearing",-1)])]),_:1})]),default:l(()=>[n(d,null,{default:l(()=>[...e[18]||(e[18]=[t("strong",null,"ç›‘å¬è€…",-1)])]),_:1}),n(V,null,{default:l(()=>[...e[19]||(e[19]=[s("è®¢é˜…äº‹ä»¶ï¼Œè‡ªåŠ¨å“åº”",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n(r,{class:"mb-4 concept-card",elevation:"2"},{default:l(()=>[n(o,{class:"d-flex align-center"},{default:l(()=>[...e[21]||(e[21]=[t("span",{class:"text-h6"},"ğŸ”„ å¼‚æ­¥ vs äº‹ä»¶",-1)])]),_:1}),n(a,null,{default:l(()=>[n(y,{density:"compact"},{default:l(()=>[n(i,null,{default:l(()=>[n(d,null,{default:l(()=>[...e[22]||(e[22]=[t("strong",null,"@Async",-1)])]),_:1}),n(V,null,{default:l(()=>[...e[23]||(e[23]=[s("å¼‚æ­¥æ‰§è¡Œï¼Œæå‡æ€§èƒ½",-1)])]),_:1})]),_:1}),n(i,null,{default:l(()=>[n(d,null,{default:l(()=>[...e[24]||(e[24]=[t("strong",null,"Event",-1)])]),_:1}),n(V,null,{default:l(()=>[...e[25]||(e[25]=[s("äº‹ä»¶é©±åŠ¨ï¼Œè§£è€¦ä¸šåŠ¡",-1)])]),_:1})]),_:1})]),_:1}),n(w,{type:"info",density:"compact",class:"mt-3"},{default:l(()=>[...e[26]||(e[26]=[s(" ä¸¤è€…å¯ä»¥ç»“åˆä½¿ç”¨ï¼šå¼‚æ­¥äº‹ä»¶ç›‘å¬å™¨ ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),n(U,{cols:"12",md:"8"},{default:l(()=>[n(r,{class:"mb-4",elevation:"2"},{default:l(()=>[n(o,null,{default:l(()=>[n(m,{color:"primary",class:"mr-2"},{default:l(()=>[...e[27]||(e[27]=[s("mdi-code-tags",-1)])]),_:1}),e[28]||(e[28]=t("span",null,"ğŸ’» @Async ä½¿ç”¨ç¤ºä¾‹",-1))]),_:1}),n(a,null,{default:l(()=>[n(L,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=u=>b.value=u),color:"primary"},{default:l(()=>[n(p,{value:"wrong"},{default:l(()=>[...e[29]||(e[29]=[s("âŒ é”™è¯¯ç”¨æ³•",-1)])]),_:1}),n(p,{value:"right"},{default:l(()=>[...e[30]||(e[30]=[s("âœ… æ­£ç¡®ç”¨æ³•",-1)])]),_:1}),n(p,{value:"config"},{default:l(()=>[...e[31]||(e[31]=[s("çº¿ç¨‹æ± é…ç½®",-1)])]),_:1})]),_:1},8,["modelValue"]),n(P,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=u=>b.value=u),class:"mt-4"},{default:l(()=>[n(f,{value:"wrong"},{default:l(()=>[...e[32]||(e[32]=[t("pre",{class:"code-block"},[t("code",null,`// âŒ é”™è¯¯ï¼šä½¿ç”¨é»˜è®¤ SimpleAsyncTaskExecutor
@Async
public void sendEmail() {
    // æ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºæ–°çº¿ç¨‹
    // é«˜å¹¶å‘ä¸‹ä¼šçº¿ç¨‹çˆ†ç‚¸ï¼
}

// é—®é¢˜ï¼š
// 1. æ— çº¿ç¨‹å¤ç”¨
// 2. æ— æœ€å¤§çº¿ç¨‹æ•°é™åˆ¶
// 3. é«˜å¹¶å‘ä¸‹ OOM é£é™©`)],-1)])]),_:1}),n(f,{value:"right"},{default:l(()=>[...e[33]||(e[33]=[t("pre",{class:"code-block"},[t("code",null,`// âœ… æ­£ç¡®ï¼šæ˜¾å¼æŒ‡å®šçº¿ç¨‹æ± 
@Async("emailExecutor")
public void sendEmail() {
    // ä½¿ç”¨è‡ªå®šä¹‰çº¿ç¨‹æ± 
    // å¯æ§ã€å¯ç›‘æ§
}

// é…ç½®çº¿ç¨‹æ± 
@Configuration
@EnableAsync
public class AsyncConfig {
    @Bean("emailExecutor")
    public Executor emailExecutor() {
        return new ThreadPoolExecutor(
            5, 10, 60L, TimeUnit.SECONDS,
            new LinkedBlockingQueue<>(100),
            new ThreadFactoryBuilder()
                .setNameFormat("email-%d")
                .build()
        );
    }
}`)],-1)])]),_:1}),n(f,{value:"config"},{default:l(()=>[...e[34]||(e[34]=[t("pre",{class:"code-block"},[t("code",null,`// æ¨èé…ç½®
@Bean("taskExecutor")
public Executor taskExecutor() {
    ThreadPoolTaskExecutor executor = 
        new ThreadPoolTaskExecutor();
    executor.setCorePoolSize(5);
    executor.setMaxPoolSize(10);
    executor.setQueueCapacity(100);
    executor.setThreadNamePrefix("async-");
    executor.setRejectedExecutionHandler(
        new ThreadPoolExecutor.CallerRunsPolicy()
    );
    executor.initialize();
    return executor;
}

// ä½¿ç”¨
@Async("taskExecutor")
public CompletableFuture<String> asyncMethod() {
    // å¼‚æ­¥é€»è¾‘
    return CompletableFuture.completedFuture("done");
}`)],-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),n(r,{class:"mb-4",elevation:"2"},{default:l(()=>[n(o,null,{default:l(()=>[n(m,{color:"primary",class:"mr-2"},{default:l(()=>[...e[35]||(e[35]=[s("mdi-bullhorn",-1)])]),_:1}),e[36]||(e[36]=t("span",null,"ğŸ“¢ Spring Event å®Œæ•´ç¤ºä¾‹",-1))]),_:1}),n(a,null,{default:l(()=>[n(L,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=u=>c.value=u),color:"primary"},{default:l(()=>[n(p,{value:"event"},{default:l(()=>[...e[37]||(e[37]=[s("äº‹ä»¶å®šä¹‰",-1)])]),_:1}),n(p,{value:"publish"},{default:l(()=>[...e[38]||(e[38]=[s("å‘å¸ƒäº‹ä»¶",-1)])]),_:1}),n(p,{value:"listen"},{default:l(()=>[...e[39]||(e[39]=[s("ç›‘å¬äº‹ä»¶",-1)])]),_:1})]),_:1},8,["modelValue"]),n(P,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=u=>c.value=u),class:"mt-4"},{default:l(()=>[n(f,{value:"event"},{default:l(()=>[...e[40]||(e[40]=[t("pre",{class:"code-block"},[t("code",null,`// 1. å®šä¹‰äº‹ä»¶
public class UserRegisteredEvent 
        extends ApplicationEvent {
    private final User user;
    
    public UserRegisteredEvent(Object source, User user) {
        super(source);
        this.user = user;
    }
    
    public User getUser() {
        return user;
    }
}`)],-1)])]),_:1}),n(f,{value:"publish"},{default:l(()=>[...e[41]||(e[41]=[t("pre",{class:"code-block"},[t("code",null,`// 2. å‘å¸ƒäº‹ä»¶
@Service
public class UserService {
    @Autowired
    private ApplicationEventPublisher publisher;
    
    public void registerUser(User user) {
        // ä¸šåŠ¡é€»è¾‘
        userDao.save(user);
        
        // å‘å¸ƒäº‹ä»¶ï¼ˆè§£è€¦ï¼‰
        publisher.publishEvent(
            new UserRegisteredEvent(this, user)
        );
    }
}`)],-1)])]),_:1}),n(f,{value:"listen"},{default:l(()=>[...e[42]||(e[42]=[t("pre",{class:"code-block"},[t("code",null,`// 3. ç›‘å¬äº‹ä»¶
@Component
public class EmailListener {
    
    @EventListener
    @Async  // å¼‚æ­¥ç›‘å¬
    public void handleUserRegistered(
            UserRegisteredEvent event) {
        User user = event.getUser();
        // å‘é€æ¬¢è¿é‚®ä»¶
        emailService.sendWelcomeEmail(user);
    }
}

// å¤šä¸ªç›‘å¬å™¨è‡ªåŠ¨æ‰§è¡Œ
@Component
public class SmsListener {
    @EventListener
    public void handleUserRegistered(
            UserRegisteredEvent event) {
        // å‘é€çŸ­ä¿¡
    }
}`)],-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),n(r,{class:"mb-4",elevation:"2"},{default:l(()=>[n(o,null,{default:l(()=>[n(m,{color:"warning",class:"mr-2"},{default:l(()=>[...e[43]||(e[43]=[s("mdi-alert",-1)])]),_:1}),e[44]||(e[44]=t("span",null,"âš ï¸ æ³¨æ„äº‹é¡¹",-1))]),_:1}),n(a,null,{default:l(()=>[n(y,null,{default:l(()=>[(v(!0),k(A,null,C(R.value,(u,E)=>(v(),T(i,{key:E,"prepend-icon":u.icon},{default:l(()=>[n(d,null,{default:l(()=>[s(S(u.text),1)]),_:2},1024)]),_:2},1032,["prepend-icon"]))),128))]),_:1})]),_:1})]),_:1}),n(r,{elevation:"2"},{default:l(()=>[n(o,null,{default:l(()=>[n(m,{color:"success",class:"mr-2"},{default:l(()=>[...e[45]||(e[45]=[s("mdi-star",-1)])]),_:1}),e[46]||(e[46]=t("span",null,"â­ æœ€ä½³å®è·µ",-1))]),_:1}),n(a,null,{default:l(()=>[n(y,null,{default:l(()=>[(v(!0),k(A,null,C(B.value,(u,E)=>(v(),T(i,{key:E,"prepend-icon":u.icon},{default:l(()=>[n(d,null,{default:l(()=>[s(S(u.text),1)]),_:2},1024)]),_:2},1032,["prepend-icon"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}}),X=O(Q,[["__scopeId","data-v-fbf5ea04"]]);export{X as default};
