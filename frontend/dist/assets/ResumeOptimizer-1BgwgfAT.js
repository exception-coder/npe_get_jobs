import{_ as We}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as ge,V as he,a as Qe}from"./VCard-DFIDGoOa.js";import{c as p,o as n,b as o,e as r,Q as i,p as f,a0 as g,x as d,aV as ue,F as V,q as A,y as $,g as y,n as Ze,t as M,V as Xe,i as le,aY as et,r as P,k as Q,m as me,_ as tt,w as lt,aZ as st,a_ as ot,j as I,a9 as ce,a$ as nt,aK as rt}from"./index-mJOBftNs.js";import{V as G,a as w}from"./VRow-C6N6h8s9.js";import{V as pe}from"./VSelect-CO5xudFf.js";import{V as z}from"./VAlert-CfJUBCCM.js";import{V as E}from"./VTextField-tFIcna6m.js";import{V as N}from"./VCombobox-By_eq-Hm.js";import{V as B}from"./VSheet-DbNfniB_.js";import{V as Z,a as X,b as ee,c as te}from"./VExpansionPanels-B32YgRTr.js";import{V as fe}from"./VTextarea-34QBZFhW.js";import"./filter-JDbFQhCL.js";const it={class:"mb-6"},at={class:"d-flex flex-column flex-sm-row align-center justify-space-between"},dt={class:"text-h5 font-weight-bold mb-2"},ut={class:"text-subtitle-2 text-medium-emphasis"},mt={class:"contact-list mt-4 mt-sm-0 text-medium-emphasis"},ct={key:0},pt={key:1},ft={key:0,class:"mt-4"},yt={key:0,class:"mb-6"},gt={class:"mb-6"},ht={class:"mb-6"},vt={class:"d-flex flex-column flex-sm-row justify-space-between"},xt={class:"text-subtitle-1 font-weight-medium"},_t={class:"text-body-2 text-medium-emphasis"},bt={class:"text-body-2 text-medium-emphasis mb-2 preserve-whitespace"},kt={class:"highlight-list"},It={class:"mb-6"},Vt={class:"d-flex flex-column flex-sm-row justify-space-between"},At={class:"text-subtitle-1 font-weight-medium"},wt={class:"text-body-2 text-medium-emphasis"},St={class:"text-body-2 text-medium-emphasis mb-2 preserve-whitespace"},zt={class:"highlight-list"},Rt={class:"d-flex flex-column flex-sm-row justify-space-between"},Et={class:"text-subtitle-1 font-weight-medium"},Ct={class:"text-body-2 text-medium-emphasis"},jt={class:"text-body-2 text-medium-emphasis"},$t={__name:"ResumePreview",props:{resume:{type:Object,required:!0}},setup(x){const u=x;return(v,_)=>(n(),p(he,{elevation:"2",class:"resume-preview"},{default:o(()=>[r(ge,{class:"pa-6"},{default:o(()=>{var L,F;return[i("section",it,[i("header",at,[i("div",null,[i("h1",dt,d(u.resume.personalInfo.name),1),i("div",ut,d(u.resume.personalInfo.title),1)]),i("div",mt,[i("div",null,d(u.resume.personalInfo.phone),1),i("div",null,d(u.resume.personalInfo.email),1),i("div",null,d(u.resume.personalInfo.location),1),u.resume.personalInfo.experience?(n(),f("div",ct,d(u.resume.personalInfo.experience),1)):g("",!0),u.resume.personalInfo.linkedin?(n(),f("div",pt,d(u.resume.personalInfo.linkedin),1)):g("",!0)])]),(L=u.resume.personalInfo.coreSkills)!=null&&L.length?(n(),f("div",ft,[_[0]||(_[0]=i("h2",{class:"section-title mb-2"},"核心技能",-1)),r(ue,{column:""},{default:o(()=>[(n(!0),f(V,null,A(u.resume.personalInfo.coreSkills,(s,C)=>(n(),p($,{key:C,class:"mb-1 me-2",color:"secondary",variant:"tonal"},{default:o(()=>[y(d(s),1)]),_:2},1024))),128))]),_:1})])):g("",!0)]),(F=u.resume.strengths)!=null&&F.length?(n(),f("section",yt,[_[1]||(_[1]=i("h2",{class:"section-title"},"个人优势",-1)),r(ue,{column:"",class:"mt-2"},{default:o(()=>[(n(!0),f(V,null,A(u.resume.strengths,(s,C)=>(n(),p($,{key:C,class:"mb-1 me-2",color:"primary",variant:"tonal"},{default:o(()=>[y(d(s),1)]),_:2},1024))),128))]),_:1})])):g("",!0),i("section",gt,[_[2]||(_[2]=i("h2",{class:"section-title"},"期望职位",-1)),r(Ze,{"bg-color":"transparent",density:"comfortable"},{default:o(()=>{var s;return[r(M,{"prepend-icon":"mdi-briefcase-outline"},{default:o(()=>[y(d(u.resume.desiredRole.title),1)]),_:1}),r(M,{"prepend-icon":"mdi-map-marker-outline"},{default:o(()=>[y(d(u.resume.desiredRole.location),1)]),_:1}),r(M,{"prepend-icon":"mdi-currency-usd"},{default:o(()=>[y(d(u.resume.desiredRole.salary),1)]),_:1}),(s=u.resume.desiredRole.industries)!=null&&s.length?(n(),p(M,{key:0,"prepend-icon":"mdi-domain"},{default:o(()=>[y(d(u.resume.desiredRole.industries.join(" / ")),1)]),_:1})):g("",!0)]}),_:1})]),i("section",ht,[_[3]||(_[3]=i("h2",{class:"section-title"},"工作经历",-1)),(n(!0),f(V,null,A(u.resume.workExperiences,(s,C)=>(n(),f("div",{key:C,class:"mb-5"},[i("div",vt,[i("div",xt,d(s.role)+" · "+d(s.company),1),i("div",_t,d(s.period),1)]),i("div",bt,d(s.summary),1),i("ul",kt,[(n(!0),f(V,null,A(s.highlights,(O,T)=>(n(),f("li",{key:T},d(O),1))),128))])]))),128))]),i("section",It,[_[4]||(_[4]=i("h2",{class:"section-title"},"项目经历",-1)),(n(!0),f(V,null,A(u.resume.projects,(s,C)=>(n(),f("div",{key:C,class:"mb-5"},[i("div",Vt,[i("div",At,d(s.name)+" · "+d(s.role),1),i("div",wt,d(s.period),1)]),i("div",St,d(s.summary),1),i("ul",zt,[(n(!0),f(V,null,A(s.highlights,(O,T)=>(n(),f("li",{key:T},d(O),1))),128))])]))),128))]),i("section",null,[_[5]||(_[5]=i("h2",{class:"section-title"},"教育经历",-1)),(n(!0),f(V,null,A(u.resume.education,(s,C)=>(n(),f("div",{key:C,class:"mb-3"},[i("div",Rt,[i("div",Et,d(s.school)+" · "+d(s.major),1),i("div",Ct,d(s.period),1)]),i("div",jt,d(s.degree),1)]))),128))])]}),_:1})]),_:1}))}},Ut=We($t,[["__scopeId","data-v-f767ff52"]]),Tt={class:"text-subtitle-1 font-weight-semibold"},Dt={key:0,class:"text-body-2 text-medium-emphasis mt-1"},j={__name:"ResumeSectionCard",props:{title:{type:String,required:!0},subtitle:{type:String,default:""},icon:{type:String,default:""}},setup(x){return(u,v)=>(n(),p(he,{class:"mb-6",elevation:"1"},{default:o(()=>[r(Qe,{class:"d-flex align-center py-4"},{default:o(()=>[x.icon?(n(),p(Xe,{key:0,icon:x.icon,class:"me-3 text-primary",size:"24"},null,8,["icon"])):g("",!0),i("div",null,[i("div",Tt,d(x.title),1),x.subtitle?(n(),f("div",Dt,d(x.subtitle),1)):g("",!0)])]),_:1}),r(le),r(ge,{class:"py-5"},{default:o(()=>[et(u.$slots,"default")]),_:3})]),_:3}))}};async function Pt(x){const u=await fetch("/api/ai/job-skill/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!u.ok){const v=await Ot(u);throw new Error(v||`AI 接口调用失败（${u.status}）`)}return u.json()}async function Ot(x){try{const u=await x.json();return u!=null&&u.message?u.message:JSON.stringify(u)}catch{try{return await x.text()}catch(v){return console.error("读取 AI 接口错误信息失败",v),""}}}async function ve(x,u){const v=await fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!v.ok){const _=await Nt(v);throw new Error(_||`AI 接口调用失败（${v.status}）`)}return v.json()}async function Lt(x){return ve("/api/ai/project/description/optimize",x)}async function Jt(x){return ve("/api/ai/project/achievement/optimize",x)}async function Nt(x){try{const u=await x.json();return u!=null&&u.message?u.message:u!=null&&u.error?u.error:JSON.stringify(u)}catch{try{return await x.text()}catch(v){return console.error("读取 AI 接口错误信息失败",v),""}}}const se="/api/resume";async function oe(x){try{const u=await x.json();return u!=null&&u.message?u.message:u!=null&&u.error?u.error:JSON.stringify(u)}catch{try{return await x.text()}catch(v){return console.error("读取接口错误信息失败",v),""}}}const Bt=async x=>{const u=await fetch(`${se}/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!u.ok){const v=await oe(u);throw new Error(v||`保存简历失败（${u.status}）`)}return u.json()},Mt=async x=>{const u=await fetch(`${se}/${x}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!u.ok){const v=await oe(u);throw new Error(v||`查询简历失败（${u.status}）`)}return u.json()},Ft=async()=>{const x=await fetch(`${se}/list`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!x.ok){const u=await oe(x);throw new Error(u||`查询简历列表失败（${x.status}）`)}return x.json()},qt={class:"d-flex flex-wrap align-center ga-3"},Gt={class:"d-flex align-center ga-3"},Yt={key:0},Ht={class:"d-flex flex-wrap align-center ga-3"},Kt={key:0,class:"text-body-2 text-medium-emphasis"},Wt={key:1,class:"text-body-2 text-medium-emphasis"},Qt={class:"d-flex flex-wrap align-center ga-3"},Zt={class:"text-body-2 text-medium-emphasis"},Xt={class:"d-flex flex-wrap align-center ga-3"},el={class:"text-body-2 text-medium-emphasis"},tl={key:0,class:"text-body-2 text-medium-emphasis"},ll={class:"d-flex flex-wrap ga-2 mb-3"},sl={key:0,class:"d-flex flex-column ga-2"},ol={class:"d-flex flex-wrap ga-2"},nl={key:1,class:"d-flex flex-column ga-2"},rl={class:"d-flex flex-wrap ga-2"},il={class:"d-flex flex-wrap align-center ga-3"},al={class:"text-body-2 text-medium-emphasis"},dl={key:0,class:"d-flex flex-column ga-2"},ul={class:"d-flex flex-wrap ga-2"},ml={key:0,class:"py-6 text-center text-medium-emphasis"},cl={key:1},pl={class:"text-body-1 font-weight-medium"},fl={class:"text-body-2 text-medium-emphasis mt-1"},yl={class:"text-body-2"},gl={class:"d-flex flex-wrap ga-2"},hl={class:"d-flex flex-wrap ga-2"},vl={class:"d-flex flex-wrap ga-2"},xl={class:"d-flex flex-wrap ga-2"},_l={class:"d-flex flex-column ga-3"},bl={class:"text-body-1 font-weight-medium"},kl={key:0,class:"text-body-2 text-medium-emphasis mt-2"},Il={key:1,class:"text-body-2 mt-3 ps-4"},Vl={key:2,class:"text-body-2 text-medium-emphasis"},Al={class:"d-flex justify-end mb-3"},wl={class:"text-body-1 font-weight-medium"},Sl={class:"d-flex justify-end mt-4"},zl={class:"d-flex justify-end mb-3"},Rl={class:"text-body-1 font-weight-medium"},El={class:"d-flex flex-wrap align-center justify-end ga-2 mt-2"},Cl={key:0,class:"text-caption text-medium-emphasis"},jl={class:"text-body-2"},$l={class:"d-flex justify-end ga-2 mt-3"},Ul={class:"d-flex flex-wrap align-center justify-end ga-2 mt-2"},Tl={key:0,class:"text-caption text-medium-emphasis"},Dl={class:"text-body-2 ps-4 mb-0"},Pl={class:"d-flex justify-end ga-2 mt-3"},Ol={class:"d-flex justify-end mt-4"},Ll={class:"d-flex flex-column ga-3"},Jl={class:"text-body-2 font-weight-medium"},Nl={key:0,class:"text-body-2 text-medium-emphasis"},Bl={key:1,class:"text-body-2 ps-4 mb-0 mt-1"},Ml={class:"d-flex justify-end mb-3"},Fl={class:"text-body-1 font-weight-medium"},ql={class:"d-flex justify-end mt-4"},Gl={class:"d-flex flex-wrap align-center mb-4 ga-2"},Yl={key:0,class:"text-body-2 text-medium-emphasis mt-2"},Hl={class:"d-flex flex-wrap align-center ga-3 mb-3"},Kl={key:0,class:"text-body-2 text-medium-emphasis"},ye="vita-polish:resume",as={__name:"ResumeOptimizer",setup(x){const u=typeof window<"u",v=P({loading:!1,error:null,resumes:[],selectedResumeId:null}),_=P({loading:!1,error:null}),L=()=>({personalInfo:{name:"张三",title:"高级Java开发工程师",phone:"138-8888-8888",email:"425485346@qq.com",location:"广州 · 可远程",experience:"8年以上",coreSkills:[],linkedin:""},strengths:[],desiredRole:{title:"",salary:"",location:"",industries:[]},workExperiences:[],projects:[],education:[]}),F=["1年以下","1-3年","3-5年","5-8年","8年以上","初级","中级","高级","资深"],s=P(L()),C=Q(["补充量化指标，提升说服力","凸显跨部门协作成果","强化 AI / 大模型项目实践"]),O=Q([]),T=Q(null),m=P({loading:!1,error:null,result:null,lastSyncedAt:null}),b=P({loading:!1,error:null,success:!1,savedResumeId:null,lastSavedAt:null}),Y=me(()=>{var a,c;const t=(a=s.personalInfo.title)==null?void 0:a.trim(),e=(c=s.personalInfo.experience)==null?void 0:c.toString().trim();return!!t&&!!e}),xe=me(()=>s.workExperiences.reduce((t,e)=>t+e.highlights.length,0)),H=P(new Map),R=t=>(H.has(t)||H.set(t,P({descriptionLoading:!1,descriptionError:null,lastDescriptionOptimizedAt:null,optimizedSummary:"",achievementLoading:!1,achievementError:null,lastAchievementOptimizedAt:null,optimizedAchievementsRaw:"",optimizedAchievements:[]})),H.get(t)),ne=()=>({resumeSummary:s.strengths.join("；"),experienceYears:s.personalInfo.experience||"",targetPosition:s.desiredRole.title||s.personalInfo.title||"",skills:Array.isArray(s.personalInfo.coreSkills)?s.personalInfo.coreSkills:[]}),_e=t=>{if(!t)return[];const e=t.split(/\r?\n+/).map(a=>a.replace(/^[\-\*\u2022•]\s*/,"").trim()).filter(Boolean);return e.length?e:[t.trim()].filter(Boolean)},re=async t=>{var a,c;if(!t||!u)return;if((c=(a=window.navigator)==null?void 0:a.clipboard)!=null&&c.writeText)try{await window.navigator.clipboard.writeText(t);return}catch(l){console.error("复制到剪贴板失败",l)}const e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select();try{document.execCommand("copy")}catch(l){console.error("复制到剪贴板失败",l)}finally{document.body.removeChild(e)}},be=async t=>{var a;const e=R(t);if(e.descriptionError=null,!t.summary||!t.summary.trim()){e.descriptionError="请先填写项目概述后再尝试优化。";return}e.descriptionLoading=!0;try{const c={...ne(),projectDescription:t.summary},l=await Lt(c),k=(a=l==null?void 0:l.optimizedContent)==null?void 0:a.trim();if(!k){e.descriptionError="AI 未返回优化内容，请稍后重试。";return}e.optimizedSummary=k,e.lastDescriptionOptimizedAt=new Date().toLocaleString()}catch(c){console.error("AI 优化项目概述失败",c),e.descriptionError=(c==null?void 0:c.message)||"AI 优化失败，请稍后重试。"}finally{e.descriptionLoading=!1}},ke=async t=>{var c;const e=R(t);e.achievementError=null;const a=Array.isArray(t.highlights)?t.highlights.map(l=>l==null?void 0:l.trim()).filter(Boolean):[];if(!a.length){e.achievementError="请至少录入一条关键成果后再尝试优化。";return}e.achievementLoading=!0;try{const l={...ne(),projectAchievement:a.join(`
`)},k=await Jt(l),S=(c=k==null?void 0:k.optimizedContent)==null?void 0:c.trim();if(!S){e.achievementError="AI 未返回优化内容，请稍后重试。";return}const h=_e(S);e.optimizedAchievementsRaw=S,e.optimizedAchievements=h,e.lastAchievementOptimizedAt=new Date().toLocaleString()}catch(l){console.error("AI 优化项目业绩失败",l),e.achievementError=(l==null?void 0:l.message)||"AI 优化失败，请稍后重试。"}finally{e.achievementLoading=!1}},Ie=t=>{const e=R(t);e.optimizedSummary&&(t.summary=e.optimizedSummary)},Ve=async t=>{const e=R(t);e.optimizedSummary&&await re(e.optimizedSummary)},Ae=t=>{const e=R(t);!Array.isArray(e.optimizedAchievements)||!e.optimizedAchievements.length||t.highlights.splice(0,t.highlights.length,...e.optimizedAchievements)},we=async t=>{const e=R(t);e.optimizedAchievementsRaw&&await re(e.optimizedAchievementsRaw)},q=(t,e)=>{if(!Array.isArray(t)||!Array.isArray(e)||!e.length)return;const a=e.filter(l=>l!=null&&l!=="");if(!a.length)return;const c=new Set(t);a.forEach(l=>c.add(l)),t.splice(0,t.length,...c)},Se=t=>{t&&(m.result=t,m.lastSyncedAt=new Date().toLocaleString())},ze=()=>{var e;const t=(e=m.result)==null?void 0:e.inferredJobTitle;t&&(s.personalInfo.title=t)},Re=()=>{var e;const t=(e=m.result)==null?void 0:e.experienceRange;t&&(s.personalInfo.experience=t)},Ee=()=>{var e;const t=(e=m.result)==null?void 0:e.techStack;!Array.isArray(t)||!t.length||q(s.personalInfo.coreSkills,t)},Ce=()=>{var e;const t=(e=m.result)==null?void 0:e.essentialStrengths;!Array.isArray(t)||!t.length||q(s.strengths,t)},je=()=>{var e;const t=(e=m.result)==null?void 0:e.relatedDomains;!Array.isArray(t)||!t.length||q(s.strengths,t)},$e=()=>{var e;const t=(e=m.result)==null?void 0:e.inferredJobTitle;t&&(s.desiredRole.title=t)},Ue=()=>{var e;const t=(e=m.result)==null?void 0:e.hotIndustries;!Array.isArray(t)||!t.length||q(s.desiredRole.industries,t)},Te=(t,e)=>{var a;return{name:t.projectName||"AI 推荐项目案例",role:s.personalInfo.title||((a=m.result)==null?void 0:a.inferredJobTitle)||"",period:t.period||e||"",summary:t.projectDescription||"",highlights:Array.isArray(t.projectAchievements)?t.projectAchievements:[]}},De=()=>{var a,c;const t=(a=m.result)==null?void 0:a.projectExperiences;if(!Array.isArray(t)||!t.length)return;const e=((c=s.workExperiences[0])==null?void 0:c.period)||"";t.forEach(l=>{const k=Te(l,e),S=s.projects.findIndex(h=>h.name===k.name);S>=0?s.projects.splice(S,1,k):s.projects.unshift(k)})},ie=(t,e=[])=>Array.isArray(t)?[...t]:e,K=t=>{!t||typeof t!="object"||(t.personalInfo&&typeof t.personalInfo=="object"&&(s.personalInfo.name=t.personalInfo.name??s.personalInfo.name,s.personalInfo.title=t.personalInfo.title??s.personalInfo.title,s.personalInfo.phone=t.personalInfo.phone??s.personalInfo.phone,s.personalInfo.email=t.personalInfo.email??s.personalInfo.email,s.personalInfo.location=t.personalInfo.location??s.personalInfo.location,s.personalInfo.experience=t.personalInfo.experience??s.personalInfo.experience,s.personalInfo.coreSkills=ie(t.personalInfo.coreSkills,s.personalInfo.coreSkills),s.personalInfo.linkedin=t.personalInfo.linkedin??s.personalInfo.linkedin),Array.isArray(t.strengths)&&s.strengths.splice(0,s.strengths.length,...t.strengths),t.desiredRole&&typeof t.desiredRole=="object"&&(s.desiredRole.title=t.desiredRole.title??s.desiredRole.title,s.desiredRole.salary=t.desiredRole.salary??s.desiredRole.salary,s.desiredRole.location=t.desiredRole.location??s.desiredRole.location,s.desiredRole.industries=ie(t.desiredRole.industries,s.desiredRole.industries)),Array.isArray(t.workExperiences)&&s.workExperiences.splice(0,s.workExperiences.length,...t.workExperiences),Array.isArray(t.projects)&&s.projects.splice(0,s.projects.length,...t.projects),Array.isArray(t.education)&&s.education.splice(0,s.education.length,...t.education))},ae=()=>{if(u)try{const t=JSON.stringify(rt(s));window.localStorage.setItem(ye,t)}catch(t){console.error("保存简历数据到本地存储失败",t)}},Pe=()=>{if(u)try{const t=window.localStorage.getItem(ye);if(!t)return;const e=JSON.parse(t);K(e)}catch(t){console.error("从本地存储加载简历数据失败",t)}},W=async()=>{v.loading=!0,v.error=null;try{const t=await Ft();v.resumes=t||[]}catch(t){console.error("加载简历列表失败",t),v.error=(t==null?void 0:t.message)||"加载简历列表失败，请稍后重试。"}finally{v.loading=!1}},Oe=async t=>{if(t){_.loading=!0,_.error=null;try{const e=await Mt(t);e&&(K(e),b.savedResumeId=e.id,b.lastSavedAt=e.updatedAt?new Date(e.updatedAt).toLocaleString():null,ae())}catch(e){console.error("加载简历失败",e),_.error=(e==null?void 0:e.message)||"加载简历失败，请稍后重试。"}finally{_.loading=!1}}},de=async t=>{v.selectedResumeId=t,await Oe(t)},Le=()=>{v.selectedResumeId=null,b.savedResumeId=null,b.lastSavedAt=null;const t=L();K(t)};tt(async()=>{await W(),v.resumes.length>0?await de(v.resumes[0].id):Pe()}),lt(s,()=>{ae()},{deep:!0});const Je=()=>{const t=[];s.personalInfo.title.includes("AI")||t.push("在职位头衔中增加 AI 关键词，匹配 AI 简历场景。"),s.strengths.length<4&&t.push("个人优势可补充团队管理、跨端协同等信息，突出综合能力。"),xe.value<6&&t.push("工作经历亮点建议至少 6 条，覆盖战略、执行与指标成果。"),s.projects.some(a=>a.highlights.some(c=>/\d/.test(c)))||t.push("为项目亮点补充量化数字（转化率、效率、覆盖人群等）增强可信度。"),t.length||t.push("当前内容结构完整，可聚焦故事化表达与个性标签强化。"),O.value=t,T.value=new Date().toLocaleString()},Ne=t=>{t&&s.strengths.push(t)},Be=()=>{s.workExperiences.push({company:"",role:"",period:"",summary:"",highlights:[]})},Me=t=>{s.workExperiences.splice(t,1)},Fe=()=>{s.projects.push({name:"",role:"",period:"",summary:"",highlights:[]})},qe=t=>{s.projects.splice(t,1)},Ge=()=>{s.education.push({school:"",major:"",degree:"",period:""})},Ye=t=>{s.education.splice(t,1)},He=async()=>{if(!(!Y.value||m.loading)){m.error=null,m.loading=!0;try{const t=await Pt({jobTitle:s.personalInfo.title,experienceYears:s.personalInfo.experience,personalStrengths:s.strengths}),e=(l={})=>({projectName:(l==null?void 0:l.project_name)||(l==null?void 0:l.projectName)||"",projectDescription:(l==null?void 0:l.project_description)||(l==null?void 0:l.projectDescription)||"",projectAchievements:Array.isArray(l==null?void 0:l.project_achievements)?l.project_achievements:Array.isArray(l==null?void 0:l.projectAchievements)?l.projectAchievements:[],period:(l==null?void 0:l.period)||""}),a=Array.isArray(t==null?void 0:t.project_experience)?t.project_experience.map(l=>e(l)):t!=null&&t.project_experience?[e(t.project_experience)]:[],c={inferredJobTitle:(t==null?void 0:t.inferred_job_title)||"",jobLevel:(t==null?void 0:t.job_level)||"",experienceRange:(t==null?void 0:t.experience_range)||"",techStack:(t==null?void 0:t.tech_stack)||[],hotIndustries:(t==null?void 0:t.hot_industries)||[],relatedDomains:(t==null?void 0:t.related_domains)||[],greetingMessage:(t==null?void 0:t.greeting_message)||"",essentialStrengths:(t==null?void 0:t.essential_strengths)||[],projectExperiences:a};Se(c)}catch(t){console.error("AI 智能补全失败",t),m.error=(t==null?void 0:t.message)||"AI 智能补全失败，请稍后重试。"}finally{m.loading=!1}}},Ke=async()=>{var t,e;b.loading=!0,b.error=null,b.success=!1;try{const a={id:b.savedResumeId,personalInfo:{name:s.personalInfo.name,title:s.personalInfo.title,phone:s.personalInfo.phone,email:s.personalInfo.email,location:s.personalInfo.location,experience:s.personalInfo.experience,coreSkills:s.personalInfo.coreSkills||[],linkedin:s.personalInfo.linkedin},strengths:s.strengths||[],desiredRole:{title:s.desiredRole.title,salary:s.desiredRole.salary,location:s.desiredRole.location,industries:s.desiredRole.industries||[]},workExperiences:s.workExperiences.map(l=>({company:l.company,role:l.role,period:l.period,summary:l.summary,highlights:l.highlights||[]})),projects:s.projects.map(l=>({name:l.name,role:l.role,period:l.period,summary:l.summary,highlights:l.highlights||[]})),education:s.education.map(l=>({school:l.school,major:l.major,degree:l.degree,period:l.period}))},c=await Bt(a);b.success=!0,b.savedResumeId=c.id,b.lastSavedAt=new Date().toLocaleString(),await W(),v.selectedResumeId=c.id,console.log("简历保存成功",c)}catch(a){console.error("保存简历失败",a),b.error=((e=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:e.message)||(a==null?void 0:a.message)||"保存简历失败，请稍后重试。"}finally{b.loading=!1}};return(t,e)=>(n(),p(nt,{class:"py-8",fluid:""},{default:o(()=>[r(G,{justify:"center",class:"g-6"},{default:o(()=>[r(w,{cols:"12",xl:"6",lg:"6",md:"7"},{default:o(()=>[r(j,{title:"简历管理",icon:"mdi-file-document-multiple-outline"},{default:o(()=>[r(G,{class:"g-4"},{default:o(()=>[r(w,{cols:"12"},{default:o(()=>[i("div",qt,[r(pe,{modelValue:v.selectedResumeId,"onUpdate:modelValue":[e[0]||(e[0]=a=>v.selectedResumeId=a),de],items:v.resumes,"item-title":"personalInfo.name","item-value":"id",label:"选择要编辑的简历",loading:v.loading,disabled:v.loading||_.loading,clearable:""},{item:o(({props:a,item:c})=>[r(M,st(ot(a)),{title:o(()=>{var l;return[y(d(((l=c.raw.personalInfo)==null?void 0:l.name)||"未命名简历"),1)]}),subtitle:o(()=>{var l;return[y(d(((l=c.raw.personalInfo)==null?void 0:l.title)||"无职位")+" · 更新于 "+d(c.raw.updatedAt?new Date(c.raw.updatedAt).toLocaleString():"未知"),1)]}),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"]),r(I,{color:"primary","prepend-icon":"mdi-plus",variant:"tonal",onClick:Le,disabled:_.loading},{default:o(()=>[...e[14]||(e[14]=[y(" 新建简历 ",-1)])]),_:1},8,["disabled"]),r(I,{color:"secondary","prepend-icon":"mdi-refresh",variant:"text",onClick:W,loading:v.loading,disabled:_.loading},{default:o(()=>[...e[15]||(e[15]=[y(" 刷新列表 ",-1)])]),_:1},8,["loading","disabled"])])]),_:1}),v.error?(n(),p(w,{key:0,cols:"12"},{default:o(()=>[r(z,{type:"error",variant:"tonal",border:"start"},{default:o(()=>[y(d(v.error),1)]),_:1})]),_:1})):g("",!0),_.loading?(n(),p(w,{key:1,cols:"12"},{default:o(()=>[r(z,{type:"info",variant:"tonal",border:"start"},{default:o(()=>[i("div",Gt,[r(ce,{indeterminate:"",size:"20",width:"2"}),e[16]||(e[16]=i("span",null,"正在加载简历数据...",-1))])]),_:1})]),_:1})):g("",!0),_.error?(n(),p(w,{key:2,cols:"12"},{default:o(()=>[r(z,{type:"error",variant:"tonal",border:"start"},{default:o(()=>[y(d(_.error),1)]),_:1})]),_:1})):g("",!0),!v.loading&&v.resumes.length===0?(n(),p(w,{key:3,cols:"12"},{default:o(()=>[r(z,{type:"info",variant:"tonal",border:"start"},{default:o(()=>[...e[17]||(e[17]=[y(' 暂无简历数据，请点击"新建简历"开始创建。 ',-1)])]),_:1})]),_:1})):g("",!0),b.savedResumeId?(n(),p(w,{key:4,cols:"12"},{default:o(()=>[r(z,{type:"success",variant:"tonal",border:"start"},{default:o(()=>[y(" 当前编辑的简历ID："+d(b.savedResumeId)+" ",1),b.lastSavedAt?(n(),f("span",Yt," · 最后保存："+d(b.lastSavedAt),1)):g("",!0)]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1}),r(j,{title:"个人信息",icon:"mdi-account-badge-outline"},{default:o(()=>[r(G,{class:"g-4"},{default:o(()=>[r(w,{cols:"12",sm:"6"},{default:o(()=>[r(E,{modelValue:s.personalInfo.name,"onUpdate:modelValue":e[1]||(e[1]=a=>s.personalInfo.name=a),label:"姓名"},null,8,["modelValue"])]),_:1}),r(w,{cols:"12",sm:"6"},{default:o(()=>[r(E,{modelValue:s.personalInfo.title,"onUpdate:modelValue":e[2]||(e[2]=a=>s.personalInfo.title=a),label:"当前头衔"},null,8,["modelValue"])]),_:1}),r(w,{cols:"12",sm:"6"},{default:o(()=>[r(E,{modelValue:s.personalInfo.phone,"onUpdate:modelValue":e[3]||(e[3]=a=>s.personalInfo.phone=a),label:"联系电话"},null,8,["modelValue"])]),_:1}),r(w,{cols:"12",sm:"6"},{default:o(()=>[r(E,{modelValue:s.personalInfo.email,"onUpdate:modelValue":e[4]||(e[4]=a=>s.personalInfo.email=a),label:"邮箱"},null,8,["modelValue"])]),_:1}),r(w,{cols:"12",sm:"6"},{default:o(()=>[r(E,{modelValue:s.personalInfo.location,"onUpdate:modelValue":e[5]||(e[5]=a=>s.personalInfo.location=a),label:"所在城市 / 工作形式"},null,8,["modelValue"])]),_:1}),r(w,{cols:"12",sm:"6"},{default:o(()=>[r(pe,{modelValue:s.personalInfo.experience,"onUpdate:modelValue":e[6]||(e[6]=a=>s.personalInfo.experience=a),items:F,label:"工作年限 / 经验标签",clearable:""},null,8,["modelValue"])]),_:1}),r(w,{cols:"12",sm:"6"},{default:o(()=>[r(E,{modelValue:s.personalInfo.linkedin,"onUpdate:modelValue":e[7]||(e[7]=a=>s.personalInfo.linkedin=a),label:"LinkedIn / 个人主页"},null,8,["modelValue"])]),_:1}),r(w,{cols:"12"},{default:o(()=>[i("div",Ht,[r(I,{color:"secondary","prepend-icon":"mdi-robot-happy",variant:"tonal",disabled:!Y.value||m.loading,loading:m.loading,onClick:He},{default:o(()=>[...e[18]||(e[18]=[y(" AI 智能补全 ",-1)])]),_:1},8,["disabled","loading"]),Y.value?m.lastSyncedAt?(n(),f("span",Wt," 最近补全时间："+d(m.lastSyncedAt),1)):g("",!0):(n(),f("span",Kt," 请先填写“当前头衔”与“工作年限 / 经验标签”后再尝试 AI 补全。 "))])]),_:1}),m.error?(n(),p(w,{key:0,cols:"12"},{default:o(()=>[r(z,{type:"error",variant:"tonal",border:"start"},{default:o(()=>[y(d(m.error),1)]),_:1})]),_:1})):g("",!0)]),_:1}),m.result?(n(),p(le,{key:0,class:"my-4"})):g("",!0),m.result?(n(),p(z,{key:1,type:"info",variant:"tonal",border:"start",class:"d-flex flex-column ga-3"},{default:o(()=>[i("div",Qt,[i("span",Zt," 推荐头衔："+d(m.result.inferredJobTitle||"暂无建议"),1),m.result.inferredJobTitle?(n(),p(I,{key:0,size:"small",variant:"tonal",color:"primary",onClick:ze},{default:o(()=>[...e[19]||(e[19]=[y(" 应用到当前头衔 ",-1)])]),_:1})):g("",!0)]),i("div",Xt,[i("span",el," 推荐经验标签："+d(m.result.experienceRange||"暂无建议"),1),m.result.experienceRange?(n(),p(I,{key:0,size:"small",variant:"tonal",color:"primary",onClick:Re},{default:o(()=>[...e[20]||(e[20]=[y(" 应用到经验标签 ",-1)])]),_:1})):g("",!0)]),m.result.greetingMessage?(n(),f("div",tl," 推荐开场语："+d(m.result.greetingMessage),1)):g("",!0)]),_:1})):g("",!0)]),_:1}),r(j,{title:"核心技能",subtitle:"建议聚焦 5-8 个能力标签，突出技术栈与领域优势",icon:"mdi-lightning-bolt-outline"},{default:o(()=>{var a,c;return[r(N,{modelValue:s.personalInfo.coreSkills,"onUpdate:modelValue":e[8]||(e[8]=l=>s.personalInfo.coreSkills=l),label:"核心技能（回车新增）",multiple:"",chips:"","closable-chips":""},null,8,["modelValue"]),(c=(a=m.result)==null?void 0:a.techStack)!=null&&c.length?(n(),p(z,{key:0,type:"info",variant:"tonal",border:"start",class:"mt-4"},{default:o(()=>[e[22]||(e[22]=i("div",{class:"text-body-2 text-medium-emphasis mb-3"},"AI 推荐技术栈",-1)),i("div",ll,[(n(!0),f(V,null,A(m.result.techStack,l=>(n(),p($,{key:l,color:"primary",variant:"tonal"},{default:o(()=>[y(d(l),1)]),_:2},1024))),128))]),r(I,{size:"small",variant:"tonal",color:"primary",onClick:Ee},{default:o(()=>[...e[21]||(e[21]=[y(" 批量添加到核心技能 ",-1)])]),_:1})]),_:1})):g("",!0)]}),_:1}),r(j,{title:"个人优势",subtitle:"建议覆盖技术栈、业务理解、团队协同等维度",icon:"mdi-star-outline"},{default:o(()=>{var a,c,l,k;return[r(N,{modelValue:s.strengths,"onUpdate:modelValue":e[9]||(e[9]=S=>s.strengths=S),label:"关键词",multiple:"",chips:"","closable-chips":"",onChange:Ne},null,8,["modelValue"]),((c=(a=m.result)==null?void 0:a.essentialStrengths)!=null&&c.length||(k=(l=m.result)==null?void 0:l.relatedDomains)!=null&&k.length)&&m.result?(n(),p(z,{key:0,type:"info",variant:"tonal",border:"start",class:"mt-4 d-flex flex-column ga-3"},{default:o(()=>{var S,h,D,J;return[(h=(S=m.result)==null?void 0:S.essentialStrengths)!=null&&h.length?(n(),f("div",sl,[e[24]||(e[24]=i("div",{class:"text-body-2 text-medium-emphasis"},"AI 推荐核心优势",-1)),i("div",ol,[(n(!0),f(V,null,A(m.result.essentialStrengths,U=>(n(),p($,{key:U,color:"secondary",variant:"tonal"},{default:o(()=>[y(d(U),1)]),_:2},1024))),128))]),r(I,{size:"small",variant:"tonal",color:"primary",onClick:Ce},{default:o(()=>[...e[23]||(e[23]=[y(" 添加到个人优势 ",-1)])]),_:1})])):g("",!0),(J=(D=m.result)==null?void 0:D.relatedDomains)!=null&&J.length?(n(),f("div",nl,[e[26]||(e[26]=i("div",{class:"text-body-2 text-medium-emphasis"},"关联领域标签",-1)),i("div",rl,[(n(!0),f(V,null,A(m.result.relatedDomains,U=>(n(),p($,{key:U,color:"secondary",variant:"outlined"},{default:o(()=>[y(d(U),1)]),_:2},1024))),128))]),r(I,{size:"small",variant:"tonal",color:"primary",onClick:je},{default:o(()=>[...e[25]||(e[25]=[y(" 添加到个人优势 ",-1)])]),_:1})])):g("",!0)]}),_:1})):g("",!0)]}),_:1}),r(j,{title:"期望职位",icon:"mdi-target-account"},{default:o(()=>{var a,c;return[r(E,{modelValue:s.desiredRole.title,"onUpdate:modelValue":e[10]||(e[10]=l=>s.desiredRole.title=l),label:"目标岗位 / 角色"},null,8,["modelValue"]),r(E,{modelValue:s.desiredRole.location,"onUpdate:modelValue":e[11]||(e[11]=l=>s.desiredRole.location=l),label:"目标地点 / 工作方式"},null,8,["modelValue"]),r(E,{modelValue:s.desiredRole.salary,"onUpdate:modelValue":e[12]||(e[12]=l=>s.desiredRole.salary=l),label:"薪资期望"},null,8,["modelValue"]),r(N,{modelValue:s.desiredRole.industries,"onUpdate:modelValue":e[13]||(e[13]=l=>s.desiredRole.industries=l),label:"感兴趣的行业方向",multiple:"",chips:"","closable-chips":""},null,8,["modelValue"]),m.result&&(m.result.inferredJobTitle||(c=(a=m.result)==null?void 0:a.hotIndustries)!=null&&c.length)?(n(),p(z,{key:0,type:"info",variant:"tonal",border:"start",class:"mt-4 d-flex flex-column ga-3"},{default:o(()=>{var l,k,S,h;return[i("div",il,[i("span",al," 推荐目标岗位："+d(((l=m.result)==null?void 0:l.inferredJobTitle)||"暂无建议"),1),(k=m.result)!=null&&k.inferredJobTitle?(n(),p(I,{key:0,size:"small",variant:"tonal",color:"primary",onClick:$e},{default:o(()=>[...e[27]||(e[27]=[y(" 应用到目标岗位 ",-1)])]),_:1})):g("",!0)]),(h=(S=m.result)==null?void 0:S.hotIndustries)!=null&&h.length?(n(),f("div",dl,[e[29]||(e[29]=i("div",{class:"text-body-2 text-medium-emphasis"},"热门行业方向",-1)),i("div",ul,[(n(!0),f(V,null,A(m.result.hotIndustries,D=>(n(),p($,{key:D,color:"primary",variant:"outlined"},{default:o(()=>[y(d(D),1)]),_:2},1024))),128))]),r(I,{size:"small",variant:"tonal",color:"primary",onClick:Ue},{default:o(()=>[...e[28]||(e[28]=[y(" 添加到行业方向 ",-1)])]),_:1})])):g("",!0)]}),_:1})):g("",!0)]}),_:1}),r(j,{title:"AI 补全结果",subtitle:"基于当前头衔与工作年限，自动补全推荐的技能、行业与项目案例",icon:"mdi-robot-excited-outline"},{default:o(()=>[m.loading?(n(),f("div",ml,[r(ce,{indeterminate:"",color:"primary"}),e[30]||(e[30]=i("div",{class:"mt-3"},"AI 正在补全简历内容，请稍候…",-1))])):m.result?(n(),f("div",cl,[r(G,{class:"g-4"},{default:o(()=>{var a,c,l,k,S;return[r(w,{cols:"12",md:"6"},{default:o(()=>[r(B,{variant:"outlined",class:"pa-4 rounded-lg"},{default:o(()=>[e[31]||(e[31]=i("div",{class:"text-subtitle-2 text-medium-emphasis mb-1"},"推荐岗位",-1)),i("div",pl,d(m.result.inferredJobTitle||"—"),1),i("div",fl,d(m.result.jobLevel||"岗位级别未提供")+" · "+d(m.result.experienceRange||"经验范围未提供"),1)]),_:1})]),_:1}),m.result.greetingMessage?(n(),p(w,{key:0,cols:"12",md:"6"},{default:o(()=>[r(z,{type:"success",variant:"tonal",border:"start",class:"h-100"},{default:o(()=>[e[32]||(e[32]=i("div",{class:"text-subtitle-2 mb-2"},"AI 打招呼消息",-1)),i("div",yl,d(m.result.greetingMessage),1)]),_:1})]),_:1})):g("",!0),(a=m.result.techStack)!=null&&a.length?(n(),p(w,{key:1,cols:"12"},{default:o(()=>[e[33]||(e[33]=i("div",{class:"text-subtitle-2 text-medium-emphasis mb-2"},"推荐技术栈",-1)),i("div",gl,[(n(!0),f(V,null,A(m.result.techStack,h=>(n(),p($,{key:h,color:"primary",variant:"tonal"},{default:o(()=>[y(d(h),1)]),_:2},1024))),128))])]),_:1})):g("",!0),(c=m.result.hotIndustries)!=null&&c.length?(n(),p(w,{key:2,cols:"12",md:"6"},{default:o(()=>[e[34]||(e[34]=i("div",{class:"text-subtitle-2 text-medium-emphasis mb-2"},"热门行业方向",-1)),i("div",hl,[(n(!0),f(V,null,A(m.result.hotIndustries,h=>(n(),p($,{key:h,color:"primary",variant:"outlined"},{default:o(()=>[y(d(h),1)]),_:2},1024))),128))])]),_:1})):g("",!0),(l=m.result.relatedDomains)!=null&&l.length?(n(),p(w,{key:3,cols:"12",md:"6"},{default:o(()=>[e[35]||(e[35]=i("div",{class:"text-subtitle-2 text-medium-emphasis mb-2"},"关联领域标签",-1)),i("div",vl,[(n(!0),f(V,null,A(m.result.relatedDomains,h=>(n(),p($,{key:h,color:"secondary",variant:"tonal"},{default:o(()=>[y(d(h),1)]),_:2},1024))),128))])]),_:1})):g("",!0),(k=m.result.essentialStrengths)!=null&&k.length?(n(),p(w,{key:4,cols:"12"},{default:o(()=>[e[36]||(e[36]=i("div",{class:"text-subtitle-2 text-medium-emphasis mb-2"},"核心优势亮点",-1)),i("div",xl,[(n(!0),f(V,null,A(m.result.essentialStrengths,h=>(n(),p($,{key:h,color:"secondary",variant:"outlined"},{default:o(()=>[y(d(h),1)]),_:2},1024))),128))])]),_:1})):g("",!0),(S=m.result.projectExperiences)!=null&&S.length?(n(),p(w,{key:5,cols:"12"},{default:o(()=>[e[37]||(e[37]=i("div",{class:"text-subtitle-2 text-medium-emphasis mb-2"},"AI 推荐项目案例",-1)),i("div",_l,[(n(!0),f(V,null,A(m.result.projectExperiences,(h,D)=>(n(),p(B,{key:h.projectName||D,variant:"outlined",class:"pa-4 rounded-lg"},{default:o(()=>{var J;return[i("div",bl,d(h.projectName||"—"),1),h.projectDescription?(n(),f("div",kl,d(h.projectDescription),1)):g("",!0),(J=h.projectAchievements)!=null&&J.length?(n(),f("ul",Il,[(n(!0),f(V,null,A(h.projectAchievements,U=>(n(),f("li",{key:U},d(U),1))),128))])):g("",!0)]}),_:2},1024))),128))])]),_:1})):g("",!0)]}),_:1})])):(n(),f("div",Vl," 尚未生成 AI 补全结果。请在上方填写当前头衔与工作年限后点击“AI 智能补全”按钮获取推荐内容。 "))]),_:1}),r(j,{title:"工作经历",icon:"mdi-briefcase-outline"},{default:o(()=>[i("div",Al,[r(I,{color:"primary","prepend-icon":"mdi-plus",variant:"tonal",onClick:Be},{default:o(()=>[...e[38]||(e[38]=[y(" 新增工作经历 ",-1)])]),_:1})]),s.workExperiences.length?g("",!0):(n(),p(z,{key:0,type:"info",variant:"tonal",class:"mb-4"},{default:o(()=>[...e[39]||(e[39]=[y(" 目前暂无工作经历，请先点击“新增工作经历”补充内容。 ",-1)])]),_:1})),s.workExperiences.length?(n(),p(Z,{key:1,variant:"accordion",multiple:""},{default:o(()=>[(n(!0),f(V,null,A(s.workExperiences,(a,c)=>(n(),p(X,{key:c},{default:o(()=>[r(ee,null,{default:o(()=>[i("div",wl,d(a.role)+" · "+d(a.company),1)]),_:2},1024),r(te,null,{default:o(()=>[r(E,{modelValue:a.company,"onUpdate:modelValue":l=>a.company=l,label:"公司"},null,8,["modelValue","onUpdate:modelValue"]),r(E,{modelValue:a.role,"onUpdate:modelValue":l=>a.role=l,label:"职位"},null,8,["modelValue","onUpdate:modelValue"]),r(E,{modelValue:a.period,"onUpdate:modelValue":l=>a.period=l,label:"时间段"},null,8,["modelValue","onUpdate:modelValue"]),r(fe,{modelValue:a.summary,"onUpdate:modelValue":l=>a.summary=l,label:"职责概述",rows:"2"},null,8,["modelValue","onUpdate:modelValue"]),r(N,{modelValue:a.highlights,"onUpdate:modelValue":l=>a.highlights=l,label:"关键成果（回车新增）",multiple:"",chips:"","closable-chips":""},null,8,["modelValue","onUpdate:modelValue"]),i("div",Sl,[r(I,{color:"error","prepend-icon":"mdi-delete-outline",variant:"text",onClick:l=>Me(c)},{default:o(()=>[...e[40]||(e[40]=[y(" 删除该经历 ",-1)])]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})):g("",!0)]),_:1}),r(j,{title:"项目经历",icon:"mdi-rocket-launch-outline"},{default:o(()=>{var a,c;return[i("div",zl,[r(I,{color:"primary","prepend-icon":"mdi-plus",variant:"tonal",onClick:Fe},{default:o(()=>[...e[41]||(e[41]=[y(" 新增项目经历 ",-1)])]),_:1})]),s.projects.length?g("",!0):(n(),p(z,{key:0,type:"info",variant:"tonal",class:"mb-4"},{default:o(()=>[...e[42]||(e[42]=[y(" 目前暂无项目经历，请先点击“新增项目经历”补充内容。 ",-1)])]),_:1})),s.projects.length?(n(),p(Z,{key:1,variant:"accordion",multiple:""},{default:o(()=>[(n(!0),f(V,null,A(s.projects,(l,k)=>(n(),p(X,{key:k},{default:o(()=>[r(ee,null,{default:o(()=>[i("div",Rl,d(l.name)+" · "+d(l.role),1)]),_:2},1024),r(te,null,{default:o(()=>{var S;return[r(E,{modelValue:l.name,"onUpdate:modelValue":h=>l.name=h,label:"项目名称"},null,8,["modelValue","onUpdate:modelValue"]),r(E,{modelValue:l.role,"onUpdate:modelValue":h=>l.role=h,label:"角色"},null,8,["modelValue","onUpdate:modelValue"]),r(E,{modelValue:l.period,"onUpdate:modelValue":h=>l.period=h,label:"时间段"},null,8,["modelValue","onUpdate:modelValue"]),r(fe,{modelValue:l.summary,"onUpdate:modelValue":h=>l.summary=h,label:"项目概述",rows:"2"},null,8,["modelValue","onUpdate:modelValue"]),i("div",El,[r(I,{size:"small",color:"primary",variant:"tonal","prepend-icon":"mdi-sparkles",loading:R(l).descriptionLoading,onClick:h=>be(l)},{default:o(()=>[...e[43]||(e[43]=[y(" AI 优化项目概述 ",-1)])]),_:1},8,["loading","onClick"]),R(l).lastDescriptionOptimizedAt?(n(),f("span",Cl," 最近优化："+d(R(l).lastDescriptionOptimizedAt),1)):g("",!0)]),R(l).descriptionError?(n(),p(z,{key:0,type:"error",variant:"tonal",border:"start",class:"mt-2"},{default:o(()=>[y(d(R(l).descriptionError),1)]),_:2},1024)):g("",!0),R(l).optimizedSummary?(n(),p(B,{key:1,class:"mt-3 pa-3 rounded-lg",variant:"outlined"},{default:o(()=>[e[46]||(e[46]=i("div",{class:"text-body-2 text-medium-emphasis mb-2"},"AI 优化项目概述结果",-1)),i("div",jl,d(R(l).optimizedSummary),1),i("div",$l,[r(I,{size:"small",variant:"text",color:"primary",onClick:h=>Ve(l)},{default:o(()=>[...e[44]||(e[44]=[y(" 复制结果 ",-1)])]),_:1},8,["onClick"]),r(I,{size:"small",variant:"tonal",color:"primary",onClick:h=>Ie(l)},{default:o(()=>[...e[45]||(e[45]=[y(" 应用到项目概述 ",-1)])]),_:1},8,["onClick"])])]),_:2},1024)):g("",!0),r(N,{modelValue:l.highlights,"onUpdate:modelValue":h=>l.highlights=h,label:"关键成果（回车新增）",multiple:"",chips:"","closable-chips":""},null,8,["modelValue","onUpdate:modelValue"]),i("div",Ul,[r(I,{size:"small",color:"primary",variant:"tonal","prepend-icon":"mdi-sparkles",loading:R(l).achievementLoading,onClick:h=>ke(l)},{default:o(()=>[...e[47]||(e[47]=[y(" AI 优化关键成果 ",-1)])]),_:1},8,["loading","onClick"]),R(l).lastAchievementOptimizedAt?(n(),f("span",Tl," 最近优化："+d(R(l).lastAchievementOptimizedAt),1)):g("",!0)]),R(l).achievementError?(n(),p(z,{key:2,type:"error",variant:"tonal",border:"start",class:"mt-2"},{default:o(()=>[y(d(R(l).achievementError),1)]),_:2},1024)):g("",!0),(S=R(l).optimizedAchievements)!=null&&S.length?(n(),p(B,{key:3,class:"mt-3 pa-3 rounded-lg",variant:"outlined"},{default:o(()=>[e[50]||(e[50]=i("div",{class:"text-body-2 text-medium-emphasis mb-2"},"AI 优化关键成果结果",-1)),i("ul",Dl,[(n(!0),f(V,null,A(R(l).optimizedAchievements,h=>(n(),f("li",{key:h},d(h),1))),128))]),i("div",Pl,[r(I,{size:"small",variant:"text",color:"primary",onClick:h=>we(l)},{default:o(()=>[...e[48]||(e[48]=[y(" 复制结果 ",-1)])]),_:1},8,["onClick"]),r(I,{size:"small",variant:"tonal",color:"primary",onClick:h=>Ae(l)},{default:o(()=>[...e[49]||(e[49]=[y(" 应用到关键成果 ",-1)])]),_:1},8,["onClick"])])]),_:2},1024)):g("",!0),i("div",Ol,[r(I,{color:"error","prepend-icon":"mdi-delete-outline",variant:"text",onClick:h=>qe(k)},{default:o(()=>[...e[51]||(e[51]=[y(" 删除该项目 ",-1)])]),_:1},8,["onClick"])])]}),_:2},1024)]),_:2},1024))),128))]),_:1})):g("",!0),(c=(a=m.result)==null?void 0:a.projectExperiences)!=null&&c.length?(n(),p(z,{key:2,type:"info",variant:"tonal",border:"start",class:"mt-4"},{default:o(()=>[i("div",Ll,[e[53]||(e[53]=i("div",{class:"text-body-2 text-medium-emphasis"},"AI 推荐项目案例",-1)),(n(!0),f(V,null,A(m.result.projectExperiences,(l,k)=>(n(),p(B,{key:l.projectName||k,variant:"text",class:"pa-0"},{default:o(()=>{var S;return[i("div",Jl,d(l.projectName||"AI 推荐项目案例"),1),l.projectDescription?(n(),f("div",Nl,d(l.projectDescription),1)):g("",!0),(S=l.projectAchievements)!=null&&S.length?(n(),f("ul",Bl,[(n(!0),f(V,null,A(l.projectAchievements,h=>(n(),f("li",{key:h},d(h),1))),128))])):g("",!0),k<m.result.projectExperiences.length-1?(n(),p(le,{key:2,class:"my-3"})):g("",!0)]}),_:2},1024))),128)),r(I,{size:"small",variant:"tonal",color:"primary",onClick:De},{default:o(()=>[...e[52]||(e[52]=[y(" 添加到项目经历 ",-1)])]),_:1})])]),_:1})):g("",!0)]}),_:1}),r(j,{title:"教育经历",icon:"mdi-school-outline"},{default:o(()=>[i("div",Ml,[r(I,{color:"primary","prepend-icon":"mdi-plus",variant:"tonal",onClick:Ge},{default:o(()=>[...e[54]||(e[54]=[y(" 新增教育经历 ",-1)])]),_:1})]),s.education.length?g("",!0):(n(),p(z,{key:0,type:"info",variant:"tonal",class:"mb-4"},{default:o(()=>[...e[55]||(e[55]=[y(" 目前暂无教育经历，请先点击“新增教育经历”补充内容。 ",-1)])]),_:1})),s.education.length?(n(),p(Z,{key:1,variant:"accordion",multiple:""},{default:o(()=>[(n(!0),f(V,null,A(s.education,(a,c)=>(n(),p(X,{key:c},{default:o(()=>[r(ee,null,{default:o(()=>[i("div",Fl,d(a.school)+" · "+d(a.degree),1)]),_:2},1024),r(te,null,{default:o(()=>[r(E,{modelValue:a.school,"onUpdate:modelValue":l=>a.school=l,label:"学校"},null,8,["modelValue","onUpdate:modelValue"]),r(E,{modelValue:a.major,"onUpdate:modelValue":l=>a.major=l,label:"专业"},null,8,["modelValue","onUpdate:modelValue"]),r(E,{modelValue:a.degree,"onUpdate:modelValue":l=>a.degree=l,label:"学位"},null,8,["modelValue","onUpdate:modelValue"]),r(E,{modelValue:a.period,"onUpdate:modelValue":l=>a.period=l,label:"时间段"},null,8,["modelValue","onUpdate:modelValue"]),i("div",ql,[r(I,{color:"error","prepend-icon":"mdi-delete-outline",variant:"text",onClick:l=>Ye(c)},{default:o(()=>[...e[56]||(e[56]=[y(" 删除该教育经历 ",-1)])]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})):g("",!0)]),_:1}),r(j,{title:"AI 优化建议",subtitle:"根据内容及时生成引导，持续在正确的方向上打磨简历",icon:"mdi-sparkles"},{default:o(()=>[i("div",Gl,[(n(!0),f(V,null,A(C.value,(a,c)=>(n(),p($,{key:c,color:"primary",variant:"tonal",class:"me-2 mb-2"},{default:o(()=>[y(d(a),1)]),_:2},1024))),128))]),r(I,{color:"primary","prepend-icon":"mdi-magic-staff",onClick:Je},{default:o(()=>[...e[57]||(e[57]=[y(" 生成优化建议 ",-1)])]),_:1}),T.value?(n(),f("div",Yl," 最近生成时间："+d(T.value),1)):g("",!0),(n(!0),f(V,null,A(O.value,(a,c)=>(n(),p(z,{key:c,type:"info",class:"mt-4",variant:"tonal",border:"start"},{default:o(()=>[y(d(a),1)]),_:2},1024))),128))]),_:1}),r(j,{title:"保存简历",subtitle:"将简历数据保存到数据库",icon:"mdi-content-save"},{default:o(()=>[i("div",Hl,[r(I,{color:"success","prepend-icon":"mdi-content-save",size:"large",loading:b.loading,onClick:Ke},{default:o(()=>[y(d(b.savedResumeId?"更新简历":"保存新简历"),1)]),_:1},8,["loading"]),b.lastSavedAt?(n(),f("span",Kl," 最近保存时间："+d(b.lastSavedAt),1)):g("",!0)]),b.success?(n(),p(z,{key:0,type:"success",variant:"tonal",border:"start",class:"mb-3"},{default:o(()=>[y(" 简历保存成功！简历ID："+d(b.savedResumeId),1)]),_:1})):g("",!0),b.error?(n(),p(z,{key:1,type:"error",variant:"tonal",border:"start"},{default:o(()=>[y(d(b.error),1)]),_:1})):g("",!0),r(z,{type:"info",variant:"tonal",border:"start",class:"mt-3"},{default:o(()=>[...e[58]||(e[58]=[i("div",{class:"text-body-2"},[i("strong",null,"提示："),i("ul",{class:"mt-2 ps-4"},[i("li",null,"简历数据会自动保存到浏览器本地存储作为备份"),i("li",null,'点击"保存简历"按钮将数据持久化到数据库'),i("li",null,"保存后可以在简历列表中选择和编辑")])],-1)])]),_:1})]),_:1})]),_:1}),r(w,{cols:"12",xl:"4",lg:"5",md:"5"},{default:o(()=>[r(Ut,{resume:s},null,8,["resume"])]),_:1})]),_:1})]),_:1}))}};export{as as default};
